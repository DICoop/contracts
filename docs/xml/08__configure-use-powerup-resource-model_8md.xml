<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.3" xml:lang="en-US">
  <compounddef id="08__configure-use-powerup-resource-model_8md" kind="file" language="Markdown">
    <compoundname>08_configure-use-powerup-resource-model.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">---</highlight></codeline>
<codeline><highlight class="normal">content_title:<sp/>How<sp/>to<sp/>configure<sp/>PowerUp<sp/>resource<sp/>model</highlight></codeline>
<codeline><highlight class="normal">---</highlight></codeline>
<codeline><highlight class="normal">#<sp/>Configure<sp/>and<sp/>Use<sp/>the<sp/>PowerUp<sp/>Resource<sp/>Model</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Overview</highlight></codeline>
<codeline><highlight class="normal">This<sp/>new<sp/>system<sp/>will<sp/>create<sp/>a<sp/>new<sp/>optional<sp/>NET<sp/>and<sp/>CPU<sp/>marketplace<sp/>which<sp/>displaces<sp/>(over<sp/>time)</highlight></codeline>
<codeline><highlight class="normal">the<sp/>existing<sp/>staking<sp/>system<sp/>and<sp/>REX<sp/>market.<sp/>Under<sp/>the<sp/>old<sp/>model,<sp/>system<sp/>token<sp/>holders</highlight></codeline>
<codeline><highlight class="normal">own<sp/>NET<sp/>and<sp/>CPU<sp/>and<sp/>may<sp/>choose<sp/>to<sp/>use<sp/>it<sp/>themselves,<sp/>delegate<sp/>it<sp/>to<sp/>others,<sp/>or<sp/>make</highlight></codeline>
<codeline><highlight class="normal">it<sp/>available<sp/>for<sp/>others<sp/>to<sp/>rent<sp/>using<sp/>the<sp/>REX<sp/>market.<sp/>Under<sp/>this<sp/>new<sp/>model,<sp/>the<sp/>chain</highlight></codeline>
<codeline><highlight class="normal">owns<sp/>almost<sp/>all<sp/>NET<sp/>and<sp/>CPU<sp/>resources<sp/>and<sp/>the<sp/>only<sp/>way<sp/>to<sp/>access<sp/>these<sp/>resources<sp/>is</highlight></codeline>
<codeline><highlight class="normal">through<sp/>the<sp/>new<sp/>`powerup`<sp/>action.<sp/>It<sp/>channels<sp/>fees<sp/>to<sp/>the<sp/>REX<sp/>pool<sp/>to<sp/>enable<sp/>token<sp/>holders</highlight></codeline>
<codeline><highlight class="normal">to<sp/>profit<sp/>off<sp/>the<sp/>new<sp/>market.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Configuration</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Definitions</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">####<sp/>Configuration</highlight></codeline>
<codeline><highlight class="normal">```c++</highlight></codeline>
<codeline><highlight class="normal">//<sp/>configure<sp/>the<sp/>`powerup`<sp/>market.<sp/>The<sp/>market<sp/>becomes<sp/>available<sp/>the<sp/>first<sp/>time<sp/>this<sp/>action<sp/>is<sp/>invoked</highlight></codeline>
<codeline><highlight class="normal">void<sp/>cfgpowerup(<sp/>powerup_config&amp;<sp/>args<sp/>);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">struct<sp/>powerup_config_resource<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;int64_t&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>current_weight_ratio;<sp/><sp/><sp/>//<sp/>Immediately<sp/>set<sp/>weight_ratio<sp/>to<sp/>this<sp/>amount.<sp/>1x<sp/>=<sp/>10^15.<sp/>0.01x<sp/>=<sp/>10^13.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the<sp/>existing<sp/>setting<sp/>or<sp/>use<sp/>the<sp/>default;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>this<sp/>avoids<sp/>sudden<sp/>price<sp/>jumps.<sp/>For<sp/>new<sp/>chains<sp/>which<sp/>don&apos;t<sp/>need</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>to<sp/>gradually<sp/>phase<sp/>out<sp/>staking<sp/>and<sp/>REX,<sp/>0.01x<sp/>(10^13)<sp/>is<sp/>a<sp/>good</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>value<sp/>for<sp/>both<sp/>current_weight_ratio<sp/>and<sp/>target_weight_ratio.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;int64_t&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target_weight_ratio;<sp/><sp/><sp/><sp/>//<sp/>Linearly<sp/>shrink<sp/>weight_ratio<sp/>to<sp/>this<sp/>amount.<sp/>1x<sp/>=<sp/>10^15.<sp/>0.01x<sp/>=<sp/>10^13.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the<sp/>existing<sp/>setting<sp/>or<sp/>use<sp/>the<sp/>default.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;int64_t&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assumed_stake_weight;<sp/><sp/><sp/>//<sp/>Assumed<sp/>stake<sp/>weight<sp/>for<sp/>ratio<sp/>calculations.<sp/>Use<sp/>the<sp/>sum<sp/>of<sp/>total</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>staked<sp/>and<sp/>total<sp/>rented<sp/>by<sp/>REX<sp/>at<sp/>the<sp/>time<sp/>the<sp/>power<sp/>market</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>is<sp/>first<sp/>activated.<sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the<sp/>existing</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>setting<sp/>(no<sp/>default<sp/>exists);<sp/>this<sp/>avoids<sp/>sudden<sp/>price<sp/>jumps.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>For<sp/>new<sp/>chains<sp/>which<sp/>don&apos;t<sp/>need<sp/>to<sp/>phase<sp/>out<sp/>staking<sp/>and<sp/>REX,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>10^12<sp/>is<sp/>probably<sp/>a<sp/>good<sp/>value.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;time_point_sec&gt;<sp/>target_timestamp;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Stop<sp/>automatic<sp/>weight_ratio<sp/>shrinkage<sp/>at<sp/>this<sp/>time.<sp/>Once<sp/>this</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>time<sp/>hits,<sp/>weight_ratio<sp/>will<sp/>be<sp/>target_weight_ratio.<sp/>Ignored</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>if<sp/>current_weight_ratio<sp/>==<sp/>target_weight_ratio.<sp/>Do<sp/>not<sp/>specify</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>this<sp/>to<sp/>preserve<sp/>the<sp/>existing<sp/>setting<sp/>(no<sp/>default<sp/>exists).</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;double&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exponent;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Exponent<sp/>of<sp/>resource<sp/>price<sp/>curve.<sp/>Must<sp/>be<sp/>&gt;=<sp/>1.<sp/>Do<sp/>not<sp/>specify</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>to<sp/>preserve<sp/>the<sp/>existing<sp/>setting<sp/>or<sp/>use<sp/>the<sp/>default.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;uint32_t&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>decay_secs;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Number<sp/>of<sp/>seconds<sp/>for<sp/>the<sp/>gap<sp/>between<sp/>adjusted<sp/>resource</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>utilization<sp/>and<sp/>instantaneous<sp/>resource<sp/>utilization<sp/>to<sp/>shrink</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>by<sp/>63%.<sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the<sp/>existing<sp/>setting<sp/>or</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>use<sp/>the<sp/>default.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;asset&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_price;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fee<sp/>needed<sp/>to<sp/>reserve<sp/>the<sp/>entire<sp/>resource<sp/>market<sp/>weight<sp/>at<sp/>the</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>minimum<sp/>price.<sp/>For<sp/>example,<sp/>this<sp/>could<sp/>be<sp/>set<sp/>to<sp/>0.005%<sp/>of</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>total<sp/>token<sp/>supply.<sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the<sp/>existing</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>setting<sp/>or<sp/>use<sp/>the<sp/>default.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;asset&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_price;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fee<sp/>needed<sp/>to<sp/>reserve<sp/>the<sp/>entire<sp/>resource<sp/>market<sp/>weight<sp/>at<sp/>the</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>maximum<sp/>price.<sp/>For<sp/>example,<sp/>this<sp/>could<sp/>be<sp/>set<sp/>to<sp/>10%<sp/>of<sp/>total</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>token<sp/>supply.<sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the<sp/>existing</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>setting<sp/>(no<sp/>default<sp/>exists).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>};</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">struct<sp/>powerup_config<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>powerup_config_resource<sp/><sp/>net;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>NET<sp/>market<sp/>configuration</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>powerup_config_resource<sp/><sp/>cpu;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>CPU<sp/>market<sp/>configuration</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;uint32_t&gt;<sp/>powerup_days;<sp/><sp/><sp/><sp/><sp/>//<sp/>`powerup`<sp/>`days`<sp/>argument<sp/>must<sp/>match<sp/>this.<sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>existing<sp/>setting<sp/>or<sp/>use<sp/>the<sp/>default.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;asset&gt;<sp/><sp/><sp/><sp/>min_powerup_fee;<sp/><sp/>//<sp/>Powerup<sp/>fees<sp/>below<sp/>this<sp/>amount<sp/>are<sp/>rejected.<sp/>Do<sp/>not<sp/>specify<sp/>to<sp/>preserve<sp/>the</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>existing<sp/>setting<sp/>(no<sp/>default<sp/>exists).</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">####<sp/>State</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Definitions<sp/>useful<sp/>to<sp/>help<sp/>understand<sp/>the<sp/>configuration,<sp/>including<sp/>defaults:</highlight></codeline>
<codeline><highlight class="normal">```c++</highlight></codeline>
<codeline><highlight class="normal">inline<sp/>constexpr<sp/>int64_t<sp/>powerup_frac<sp/>=<sp/>1&apos;000&apos;000&apos;000&apos;000&apos;000ll;<sp/><sp/>//<sp/>1.0<sp/>=<sp/>10^15</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">struct<sp/>powerup_state_resource<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>constexpr<sp/>double<sp/><sp/><sp/>default_exponent<sp/><sp/><sp/>=<sp/>2.0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Exponent<sp/>of<sp/>2.0<sp/>means<sp/>that<sp/>the<sp/>price<sp/>to<sp/>reserve<sp/>a</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>tiny<sp/>amount<sp/>of<sp/>resources<sp/>increases<sp/>linearly</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>with<sp/>utilization.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>constexpr<sp/>uint32_t<sp/>default_decay_secs<sp/>=<sp/>1<sp/>*<sp/>seconds_per_day;<sp/><sp/>//<sp/>1<sp/>day;<sp/>if<sp/>100%<sp/>of<sp/>bandwidth<sp/>resources<sp/>are<sp/>in<sp/>a</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>single<sp/>loan,<sp/>then,<sp/>assuming<sp/>no<sp/>further<sp/>powerup<sp/>usage,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>1<sp/>day<sp/>after<sp/>it<sp/>expires<sp/>the<sp/>adjusted<sp/>utilization</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>will<sp/>be<sp/>at<sp/>approximately<sp/>37%<sp/>and<sp/>after<sp/>3<sp/>days</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>the<sp/>adjusted<sp/>utilization<sp/>will<sp/>be<sp/>less<sp/>than<sp/>5%.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>weight<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>resource<sp/>market<sp/>weight.<sp/>calculated;<sp/>varies<sp/>over<sp/>time.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>1<sp/>represents<sp/>the<sp/>same<sp/>amount<sp/>of<sp/>resources<sp/>as<sp/>1</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>satoshi<sp/>of<sp/>SYS<sp/>staked.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>weight_ratio<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>resource<sp/>market<sp/>weight<sp/>ratio:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>assumed_stake_weight<sp/>/<sp/>(assumed_stake_weight<sp/>+<sp/>weight).</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>calculated;<sp/>varies<sp/>over<sp/>time.<sp/>1x<sp/>=<sp/>10^15.<sp/>0.01x<sp/>=<sp/>10^13.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assumed_stake_weight<sp/><sp/><sp/><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Assumed<sp/>stake<sp/>weight<sp/>for<sp/>ratio<sp/>calculations.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial_weight_ratio<sp/><sp/><sp/><sp/>=<sp/>powerup_frac;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Initial<sp/>weight_ratio<sp/>used<sp/>for<sp/>linear<sp/>shrinkage.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target_weight_ratio<sp/><sp/><sp/><sp/><sp/>=<sp/>powerup_frac<sp/>/<sp/>100;<sp/>//<sp/>Linearly<sp/>shrink<sp/>the<sp/>weight_ratio<sp/>to<sp/>this<sp/>amount.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>time_point_sec<sp/>initial_timestamp<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>When<sp/>weight_ratio<sp/>shrinkage<sp/>started</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>time_point_sec<sp/>target_timestamp<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Stop<sp/>automatic<sp/>weight_ratio<sp/>shrinkage<sp/>at<sp/>this<sp/>time.<sp/>Once<sp/>this</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>time<sp/>hits,<sp/>weight_ratio<sp/>will<sp/>be<sp/>target_weight_ratio.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>double<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exponent<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>default_exponent;<sp/><sp/><sp/>//<sp/>Exponent<sp/>of<sp/>resource<sp/>price<sp/>curve.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/>decay_secs<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>default_decay_secs;<sp/>//<sp/>Number<sp/>of<sp/>seconds<sp/>for<sp/>the<sp/>gap<sp/>between<sp/>adjusted<sp/>resource</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>utilization<sp/>and<sp/>instantaneous<sp/>utilization<sp/>to<sp/>shrink<sp/>by<sp/>63%.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>asset<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_price<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fee<sp/>needed<sp/>to<sp/>reserve<sp/>the<sp/>entire<sp/>resource<sp/>market<sp/>weight<sp/>at</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>the<sp/>minimum<sp/>price<sp/>(defaults<sp/>to<sp/>0).</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>asset<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_price<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Fee<sp/>needed<sp/>to<sp/>reserve<sp/>the<sp/>entire<sp/>resource<sp/>market<sp/>weight<sp/>at</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>the<sp/>maximum<sp/>price.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>utilization<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Instantaneous<sp/>resource<sp/>utilization.<sp/>This<sp/>is<sp/>the<sp/>current</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>amount<sp/>sold.<sp/>utilization<sp/>&lt;=<sp/>weight.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>adjusted_utilization<sp/><sp/><sp/><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Adjusted<sp/>resource<sp/>utilization.<sp/>This<sp/>is<sp/>&gt;=<sp/>utilization<sp/>and</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/><sp/><sp/><sp/>&lt;=<sp/>weight.<sp/>It<sp/>grows<sp/>instantly<sp/>but<sp/>decays<sp/>exponentially.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>time_point_sec<sp/>utilization_timestamp<sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>When<sp/>adjusted_utilization<sp/>was<sp/>last<sp/>updated</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">struct<sp/>powerup_state<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>constexpr<sp/>uint32_t<sp/>default_powerup_days<sp/>=<sp/>30;<sp/>//<sp/>30<sp/>day<sp/>resource<sp/>powerups</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>powerup_state_resource<sp/><sp/><sp/><sp/><sp/>net<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>NET<sp/>market<sp/>state</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>powerup_state_resource<sp/><sp/><sp/><sp/><sp/>cpu<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>CPU<sp/>market<sp/>state</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>powerup_days<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>default_powerup_days;<sp/><sp/><sp/>//<sp/>`powerup`<sp/>`days`<sp/>argument<sp/>must<sp/>match<sp/>this.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>asset<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_powerup_fee<sp/><sp/><sp/>=<sp/>{};<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>fees<sp/>below<sp/>this<sp/>amount<sp/>are<sp/>rejected</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>uint64_t<sp/>primary_key()const<sp/>{<sp/>return<sp/>0;<sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Preparation<sp/>for<sp/>Upgrade</highlight></codeline>
<codeline><highlight class="normal">1.<sp/>Build<sp/>the<sp/>[reference-contracts](https://github.com/AntelopeIO/reference-contracts)<sp/>with<sp/>`powerup`<sp/>code.</highlight></codeline>
<codeline><highlight class="normal">2.<sp/>Deploy<sp/>eosio.system<sp/>contract<sp/>to<sp/>`eosio`.</highlight></codeline>
<codeline><highlight class="normal">3.<sp/>Create<sp/>account<sp/>`eosio.reserv`<sp/>and<sp/>ensure<sp/>the<sp/>account<sp/>has<sp/>enough<sp/>RAM,<sp/>at<sp/>least<sp/>4<sp/>KiB.</highlight></codeline>
<codeline><highlight class="normal">4.<sp/>Deploy<sp/>`powup.results.abi`<sp/>to<sp/>`eosio.reserv`<sp/>account<sp/>using<sp/>`setabi`.<sp/>The<sp/>ABI<sp/>can<sp/>be<sp/>found<sp/>in<sp/>the<sp/>`build/contracts/eosio.system/.powerup/`<sp/>directory.</highlight></codeline>
<codeline><highlight class="normal">5.<sp/>Enable<sp/>the<sp/>REX<sp/>system<sp/>(if<sp/>not<sp/>enabled).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Configuring<sp/>PowerUp</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">####<sp/>Config<sp/>file</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">#<sp/>config.json</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;net&quot;:<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;assumed_stake_weight&quot;:<sp/>944076307,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;current_weight_ratio&quot;:<sp/>1000000000000000,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;decay_secs&quot;:<sp/>86400,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;exponent&quot;:<sp/>2,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;max_price&quot;:<sp/>&quot;10000000.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;min_price&quot;:<sp/>&quot;0.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_timestamp&quot;:<sp/>&quot;2022-01-01T00:00:00.000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_weight_ratio&quot;:<sp/>10000000000000</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;cpu&quot;:<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;assumed_stake_weight&quot;:<sp/>3776305228,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;current_weight_ratio&quot;:<sp/>1000000000000000,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;decay_secs&quot;:<sp/>86400,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;exponent&quot;:<sp/>2,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;max_price&quot;:<sp/>&quot;10000000.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;min_price&quot;:<sp/>&quot;0.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_timestamp&quot;:<sp/>&quot;2022-01-01T00:00:00.000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_weight_ratio&quot;:<sp/>10000000000000</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;min_powerup_fee&quot;:<sp/>&quot;0.0001<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;powerup_days&quot;:<sp/>1</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">####<sp/>cfgpowerup<sp/>Action<sp/>Call</highlight></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">#<sp/>call<sp/>to<sp/>`cfgpowerup`</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>push<sp/>action<sp/>eosio<sp/>cfgpowerup<sp/>&quot;[`cat<sp/>./config.json`]&quot;<sp/>-p<sp/>eosio</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">####<sp/>Check<sp/>state</highlight></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>get<sp/>table<sp/>eosio<sp/>0<sp/>powup.state</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;rows&quot;:<sp/>[{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;version&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;net&quot;:<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;version&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;weight&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;weight_ratio&quot;:<sp/>&quot;1000000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;assumed_stake_weight&quot;:<sp/>944076307,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;initial_weight_ratio&quot;:<sp/>&quot;1000000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_weight_ratio&quot;:<sp/>&quot;10000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;initial_timestamp&quot;:<sp/>&quot;2020-11-16T19:52:50&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_timestamp&quot;:<sp/>&quot;2022-01-01T00:00:00&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;exponent&quot;:<sp/>&quot;2.00000000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;decay_secs&quot;:<sp/>3600,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;min_price&quot;:<sp/>&quot;0.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;max_price&quot;:<sp/>&quot;10000000.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;utilization&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;adjusted_utilization&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;utilization_timestamp&quot;:<sp/>&quot;2020-11-16T19:52:50&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;cpu&quot;:<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;version&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;weight&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;weight_ratio&quot;:<sp/>&quot;1000000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;assumed_stake_weight&quot;:<sp/>3776305228,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;initial_weight_ratio&quot;:<sp/>&quot;1000000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_weight_ratio&quot;:<sp/>&quot;10000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;initial_timestamp&quot;:<sp/>&quot;2020-11-16T19:52:50&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;target_timestamp&quot;:<sp/>&quot;2022-01-01T00:00:00&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;exponent&quot;:<sp/>&quot;2.00000000000000000&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;decay_secs&quot;:<sp/>3600,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;min_price&quot;:<sp/>&quot;0.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;max_price&quot;:<sp/>&quot;10000000.0000<sp/>TST&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;utilization&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;adjusted_utilization&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;utilization_timestamp&quot;:<sp/>&quot;2020-11-16T19:52:50&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;powerup_days&quot;:<sp/>1,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;min_powerup_fee&quot;:<sp/>&quot;0.0001<sp/>TST&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;more&quot;:<sp/>false,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;next_key&quot;:<sp/>&quot;&quot;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Using<sp/>PowerUp</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">####<sp/>Executing<sp/>an<sp/>order</highlight></codeline>
<codeline><highlight class="normal">The<sp/>action<sp/>to<sp/>power<sp/>up<sp/>an<sp/>account<sp/>is<sp/>`powerup`.<sp/>It<sp/>takes<sp/>a<sp/>`payer`<sp/>of<sp/>the<sp/>fee<sp/>and<sp/>a<sp/>`receiver`<sp/>of<sp/>the<sp/>resources.<sp/>The<sp/>`days`<sp/>must<sp/>always<sp/>match<sp/>`state.powerup_days`.<sp/>`net_frac`<sp/>and<sp/>`cpu_frac`<sp/>are<sp/>the<sp/>percentage<sp/>of<sp/>the<sp/>resources<sp/>that<sp/>you<sp/>need.<sp/>The<sp/>easiest<sp/>way<sp/>to<sp/>caclulate<sp/>the<sp/>percentage<sp/>is<sp/>to<sp/>multiple<sp/>10^15<sp/>(100%)<sp/>by<sp/>the<sp/>desired<sp/>percentage.<sp/>For<sp/>example:<sp/>10^15<sp/>*<sp/>0.01<sp/>=<sp/>10^13.</highlight></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>push<sp/>action<sp/>eosio<sp/>powerup<sp/>&apos;[user,<sp/>user,<sp/>1,<sp/>10000000000000,<sp/>10000000000000,<sp/>&quot;1000.0000<sp/>TST&quot;]&apos;<sp/>-p<sp/>user</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">executed<sp/>transaction:<sp/>82b7124601612b371b812e3bf65cf63bb44616802d3cd33a2c0422b58399f54f<sp/><sp/>144<sp/>bytes<sp/><sp/>521<sp/>us</highlight></codeline>
<codeline><highlight class="normal">#<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eosio<sp/>&lt;=<sp/>eosio::powerup<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{&quot;payer&quot;:&quot;user&quot;,&quot;receiver&quot;:&quot;user&quot;,&quot;days&quot;:1,&quot;net_frac&quot;:&quot;10000000000000&quot;,&quot;cpu_frac&quot;:&quot;10000000000000&quot;,&quot;...</highlight></codeline>
<codeline><highlight class="normal">#<sp/><sp/><sp/>eosio.token<sp/>&lt;=<sp/>eosio.token::transfer<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{&quot;from&quot;:&quot;user&quot;,&quot;to&quot;:&quot;eosio.rex&quot;,&quot;quantity&quot;:&quot;999.9901<sp/>TST&quot;,&quot;memo&quot;:&quot;transfer<sp/>from<sp/>user<sp/>to<sp/>eosio.rex&quot;}</highlight></codeline>
<codeline><highlight class="normal">#<sp/><sp/>eosio.reserv<sp/>&lt;=<sp/>eosio.reserv::powupresult<sp/><sp/><sp/><sp/>{&quot;fee&quot;:&quot;999.9901<sp/>TST&quot;,&quot;powup_net_weight&quot;:&quot;16354&quot;,&quot;powup_cpu_weight&quot;:&quot;65416&quot;}</highlight></codeline>
<codeline><highlight class="normal">#<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user<sp/>&lt;=<sp/>eosio.token::transfer<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{&quot;from&quot;:&quot;user&quot;,&quot;to&quot;:&quot;eosio.rex&quot;,&quot;quantity&quot;:&quot;999.9901<sp/>TST&quot;,&quot;memo&quot;:&quot;transfer<sp/>from<sp/>user<sp/>to<sp/>eosio.rex&quot;}</highlight></codeline>
<codeline><highlight class="normal">#<sp/><sp/><sp/><sp/><sp/>eosio.rex<sp/>&lt;=<sp/>eosio.token::transfer<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{&quot;from&quot;:&quot;user&quot;,&quot;to&quot;:&quot;eosio.rex&quot;,&quot;quantity&quot;:&quot;999.9901<sp/>TST&quot;,&quot;memo&quot;:&quot;transfer<sp/>from<sp/>user<sp/>to<sp/>eosio.rex&quot;}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>see<sp/>how<sp/>much<sp/>NET<sp/>and<sp/>CPU<sp/>weight<sp/>was<sp/>received<sp/>as<sp/>well<sp/>as<sp/>the<sp/>fee<sp/>by<sp/>looking<sp/>at<sp/>the<sp/>`eosio.reserv::powupresult`<sp/>informational<sp/>action.<sp/></highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*It<sp/>is<sp/>worth<sp/>mentioning<sp/>that<sp/>the<sp/>network<sp/>being<sp/>used<sp/>for<sp/>the<sp/>example<sp/>has<sp/>not<sp/>fully<sp/>transitioned<sp/>so<sp/>the<sp/>available<sp/>resources<sp/>are<sp/>minimal<sp/>therefore<sp/>1%<sp/>of<sp/>the<sp/>resources<sp/>are<sp/>quite<sp/>expensive.<sp/>As<sp/>the<sp/>system<sp/>continues<sp/>the<sp/>transition<sp/>more<sp/>resources<sp/>are<sp/>available<sp/>to<sp/>the<sp/>`PowerUp`<sp/>resource<sp/>model<sp/>and<sp/>will<sp/>become<sp/>more<sp/>affordable.*</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">####<sp/>Processing<sp/>Expired<sp/>Orders</highlight></codeline>
<codeline><highlight class="normal">The<sp/>resources<sp/>in<sp/>loans<sp/>that<sp/>expire<sp/>do<sp/>not<sp/>automatically<sp/>get<sp/>reclaimed<sp/>by<sp/>the<sp/>system.<sp/>The<sp/>expired<sp/>loans<sp/>sit<sp/>in<sp/>a<sp/>queue<sp/>that<sp/>must<sp/>be<sp/>processed.<sp/>Anyone<sp/>calling<sp/>the<sp/>`powerup`<sp/>action<sp/>will<sp/>help<sp/>with<sp/>processing<sp/>this<sp/>queue<sp/>(limited<sp/>to<sp/>processing<sp/>at<sp/>most<sp/>two<sp/>expired<sp/>loans<sp/>at<sp/>a<sp/>time)<sp/>so<sp/>that<sp/>normally<sp/>the<sp/>expired<sp/>loans<sp/>will<sp/>be<sp/>automatically<sp/>processed<sp/>in<sp/>a<sp/>timely<sp/>manner.<sp/>However,<sp/>in<sp/>some<sp/>cases<sp/>it<sp/>may<sp/>be<sp/>necessary<sp/>to<sp/>manual<sp/>process<sp/>expired<sp/>loans<sp/>in<sp/>the<sp/>queue<sp/>to<sp/>make<sp/>resources<sp/>available<sp/>to<sp/>the<sp/>system<sp/>again<sp/>and<sp/>thus<sp/>make<sp/>prices<sp/>cheaper.<sp/>In<sp/>such<sp/>a<sp/>scenario,<sp/>any<sp/>account<sp/>may<sp/>process<sp/>up<sp/>to<sp/>an<sp/>arbitrary<sp/>number<sp/>of<sp/>expired<sp/>loans<sp/>by<sp/>calling<sp/>the<sp/>`powerupexec`<sp/>action.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>orders<sp/>table<sp/>`powup.order`<sp/>can<sp/>be<sp/>viewed<sp/>by<sp/>calling:</highlight></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>get<sp/>table<sp/>eosio<sp/>0<sp/>powup.order</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;rows&quot;:<sp/>[{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;version&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;id&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;owner&quot;:<sp/>&quot;user&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;net_weight&quot;:<sp/>16354,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;cpu_weight&quot;:<sp/>65416,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;expires&quot;:<sp/>&quot;2020-11-18T13:04:33&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;more&quot;:<sp/>false,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;next_key&quot;:<sp/>&quot;&quot;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Example<sp/>`powerupexec`<sp/>call:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>push<sp/>action<sp/>eosio<sp/>powerupexec<sp/>&apos;[user,<sp/>2]&apos;<sp/>-p<sp/>user</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```console</highlight></codeline>
<codeline><highlight class="normal">executed<sp/>transaction:<sp/>93ab4ac900a7902e4e59e5e925e8b54622715328965150db10774aa09855dc98<sp/><sp/>104<sp/>bytes<sp/><sp/>363<sp/>us</highlight></codeline>
<codeline><highlight class="normal">#<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eosio<sp/>&lt;=<sp/>eosio::powerupexec<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{&quot;user&quot;:&quot;user&quot;,&quot;max&quot;:2}</highlight></codeline>
<codeline><highlight class="normal">warning:<sp/>transaction<sp/>executed<sp/>locally,<sp/>but<sp/>may<sp/>not<sp/>be<sp/>confirmed<sp/>by<sp/>the<sp/>network<sp/>yet<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
    </programlisting>
    <location file="system/docs/04_guides/08_configure-use-powerup-resource-model.md"/>
  </compounddef>
</doxygen>
