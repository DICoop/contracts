<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.3" xml:lang="en-US">
  <compounddef id="eosio_8wrap__tests_8cpp" kind="file" language="C++">
    <compoundname>eosio.wrap_tests.cpp</compoundname>
    <includes local="no">boost/test/unit_test.hpp</includes>
    <includes local="no">eosio/testing/tester.hpp</includes>
    <includes local="no">eosio/chain/abi_serializer.hpp</includes>
    <includes local="no">fc/variant_object.hpp</includes>
    <includes local="yes">contracts.hpp</includes>
    <incdepgraph>
      <node id="1">
        <label>system/tests/eosio.wrap_tests.cpp</label>
        <link refid="eosio_8wrap__tests_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>boost/test/unit_test.hpp</label>
      </node>
      <node id="6">
        <label>contracts.hpp</label>
      </node>
      <node id="4">
        <label>eosio/chain/abi_serializer.hpp</label>
      </node>
      <node id="3">
        <label>eosio/testing/tester.hpp</label>
      </node>
      <node id="5">
        <label>fc/variant_object.hpp</label>
      </node>
    </incdepgraph>
    <innerclass refid="classeosio__wrap__tester" prot="public">eosio_wrap_tester</innerclass>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" prot="public" static="no">
        <type>fc::mutable_variant_object</type>
        <definition>using mvo =  fc::mutable_variant_object</definition>
        <argsstring></argsstring>
        <name>mvo</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="15" column="1" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="15" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="eosio_8wrap__tests_8cpp_1ae12fdfc810abe8198d2e99024387b8f8" prot="public" static="no" mutable="no">
        <type><ref refid="classeosio__wrap__tester" kindref="compound">eosio_wrap_tester</ref></type>
        <definition>eosio_wrap_tester try</definition>
        <argsstring></argsstring>
        <name>try</name>
        <initializer>{
   auto <ref refid="eosio_8msig__tests_8cpp_1a25b4856cb0002d35fd95904362951aab" kindref="member">trx</ref> = reqauth( &quot;bob&quot;_n, {<ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{&quot;bob&quot;_n, config::active_name}} )</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="187" column="22" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="187" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" prot="public" static="no" mutable="no">
        <type>auto</type>
        <definition>auto wrap_trx</definition>
        <argsstring></argsstring>
        <name>wrap_trx</name>
        <initializer>= wrap_exec( &quot;alice&quot;_n, <ref refid="eosio_8msig__tests_8cpp_1a25b4856cb0002d35fd95904362951aab" kindref="member">trx</ref> )</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="189" column="9" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="189" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" prot="public" static="no" mutable="no">
        <type>transaction_trace_ptr</type>
        <definition>transaction_trace_ptr trace</definition>
        <argsstring></argsstring>
        <name>trace</name>
        <initializer>= <ref refid="eosio_8msig__tests_8cpp_1a0a4c6f926e5c8b4f845b15a3269c6745" kindref="member">push_action</ref>( &quot;eosio.msig&quot;_n, &quot;exec&quot;_n, &quot;alice&quot;_n, <ref refid="eosio_8msig__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()
                                                (&quot;proposer&quot;,      &quot;<ref refid="eosio_8wrap__tests_8cpp_1a84f3ef531d0454450811683adcd27d01" kindref="member">carol</ref>&quot;)
                                                (&quot;proposal_name&quot;, &quot;first&quot;)
                                                (&quot;executer&quot;,      &quot;<ref refid="eosio_8msig__tests_8cpp_1a14a7b35c45efb6229adcb679f12a0a1e" kindref="member">alice</ref>&quot;)
   )</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="205" column="26" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="205" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" prot="public" static="no" mutable="no">
        <type></type>
        <definition>proposer</definition>
        <argsstring></argsstring>
        <name>proposer</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="245" column="43" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="245" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="eosio_8wrap__tests_8cpp_1a579e43b423b454623383471aeb85cd87" prot="public" static="no" mutable="no">
        <type></type>
        <definition>alice</definition>
        <argsstring></argsstring>
        <name>alice</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="247" column="49" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="248" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="eosio_8wrap__tests_8cpp_1ab76bd4660c490cd9938c4daad9c92077" prot="public" static="no" mutable="no">
        <type></type>
        <definition>eosio_assert_message_exception</definition>
        <argsstring></argsstring>
        <name>eosio_assert_message_exception</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="248" column="41" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="248" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" prot="public" static="no" mutable="no">
        <type>auto</type>
        <definition>auto trx</definition>
        <argsstring></argsstring>
        <name>trx</name>
        <initializer>= reqauth( &quot;bob&quot;_n, {<ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{&quot;bob&quot;_n, config::active_name}}, 120 )</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="257" column="9" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="257" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1a2e65df94faff8c29f877ab179f19f91c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>BOOST_FIXTURE_TEST_CASE</definition>
        <argsstring>(wrap_exec_direct, eosio_wrap_tester)</argsstring>
        <name>BOOST_FIXTURE_TEST_CASE</name>
        <param>
          <type>wrap_exec_direct</type>
        </param>
        <param>
          <type><ref refid="classeosio__wrap__tester" kindref="compound">eosio_wrap_tester</ref></type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="171" column="1" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="171" bodyend="185"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1a57b9f3fe8c9902c50c6f8f628bad2360" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>FC_LOG_AND_RETHROW</definition>
        <argsstring>() BOOST_FIXTURE_TEST_CASE(wrap_with_msig</argsstring>
        <name>FC_LOG_AND_RETHROW</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="185" column="2"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1aa95225721099067970875bff95a0d4a6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>propose</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, { {&quot;alice&quot;_n, &quot;active&quot;_n}, {&quot;prod1&quot;_n, &quot;active&quot;_n}, {&quot;prod2&quot;_n, &quot;active&quot;_n}, {&quot;prod3&quot;_n, &quot;active&quot;_n}, {&quot;prod4&quot;_n, &quot;active&quot;_n}, {&quot;prod5&quot;_n, &quot;active&quot;_n} }, wrap_trx)</argsstring>
        <name>propose</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>{ {&quot;alice&quot;_n, &quot;active&quot;_n}, {&quot;prod1&quot;_n, &quot;active&quot;_n}, {&quot;prod2&quot;_n, &quot;active&quot;_n}, {&quot;prod3&quot;_n, &quot;active&quot;_n}, {&quot;prod4&quot;_n, &quot;active&quot;_n}, {&quot;prod5&quot;_n, &quot;active&quot;_n} }</type>
        </param>
        <param>
          <type><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref></type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="191" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="191" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>approve</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;alice&quot;_n)</argsstring>
        <name>approve</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;alice&quot;</type>
          <declname>_n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="196" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="196" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1a9888066d62da74e89b0767f76d8eb2c8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>approve</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;prod1&quot;_n)</argsstring>
        <name>approve</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;prod1&quot;</type>
          <declname>_n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="199" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="199" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1ae5463034ac5ef2e95f3fefaea0dd3f79" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>approve</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;prod2&quot;_n)</argsstring>
        <name>approve</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;prod2&quot;</type>
          <declname>_n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="200" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="200" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1a68343996cb35e5e0bf7832180ed40075" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>approve</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;prod3&quot;_n)</argsstring>
        <name>approve</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;prod3&quot;</type>
          <declname>_n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="201" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="201" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1aac6f844b3aadbcae6054fa8f9774ee9f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>approve</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;prod4&quot;_n)</argsstring>
        <name>approve</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;prod4&quot;</type>
          <declname>_n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="202" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="202" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1afe9f4ddeb5ea957f9f05f6770adcbb8e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>check_traces</definition>
        <argsstring>(trace, { {{&quot;receiver&quot;, &quot;eosio.msig&quot;_n}, {&quot;act_name&quot;, &quot;exec&quot;_n}}, {{&quot;receiver&quot;, &quot;eosio.wrap&quot;_n}, {&quot;act_name&quot;, &quot;exec&quot;_n}}, {{&quot;receiver&quot;, config::system_account_name}, {&quot;act_name&quot;, &quot;reqauth&quot;_n}} })</argsstring>
        <name>check_traces</name>
        <param>
          <type><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref></type>
        </param>
        <param>
          <type>{ {{&quot;receiver&quot;, &quot;eosio.msig&quot;_n}, {&quot;act_name&quot;, &quot;exec&quot;_n}}, {{&quot;receiver&quot;, &quot;<ref refid="classeosio_1_1wrap" kindref="compound">eosio.wrap</ref>&quot;_n}, {&quot;act_name&quot;, &quot;exec&quot;_n}}, {{&quot;receiver&quot;, config::system_account_name}, {&quot;act_name&quot;, &quot;reqauth&quot;_n}} }</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="211" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="211" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1aded4b3d8eebe870ef53b78ea95a1cef6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>unapprove</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;prod1&quot;_n)</argsstring>
        <name>unapprove</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;prod1&quot;</type>
          <declname>_n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="236" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="236" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1abd47bbc7b84947d84c8f8cf805c916b8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>produce_block</definition>
        <argsstring>()</argsstring>
        <name>produce_block</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="241" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="241" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1a84f3ef531d0454450811683adcd27d01" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>carol</definition>
        <argsstring>(&quot;proposal_name&quot;, &quot;first&quot;)(&quot;executer&quot;</argsstring>
        <name>carol</name>
        <param>
          <type>&quot;proposal_name&quot;</type>
        </param>
        <param>
          <type>&quot;first&quot;</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="245" column="57"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1ae53689a88727b2583f9317c0b61ff4fd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>eosio_assert_message_is</definition>
        <argsstring>(&quot;transaction authorization failed&quot;))</argsstring>
        <name>eosio_assert_message_is</name>
        <param>
          <type>&quot;transaction authorization failed&quot;</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="249" column="43" declfile="system/tests/eosio.wrap_tests.cpp" declline="249" declcolumn="43"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1aa8a24bdd630af0aa17f02c9802a75134" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>set_producers</definition>
        <argsstring>({&quot;prod1&quot;_n, &quot;prod2&quot;_n, &quot;prod3&quot;_n, &quot;prod4&quot;_n, &quot;prod5&quot;_n, &quot;newprod1&quot;_n})</argsstring>
        <name>set_producers</name>
        <param>
          <type>{&quot;prod1&quot;_n, &quot;prod2&quot;_n, &quot;prod3&quot;_n, &quot;prod4&quot;_n, &quot;prod5&quot;_n, &quot;newprod1&quot;_n}</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="273" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="273" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1aa5ff1cefa027f180e6788b1c45695a4c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>while</definition>
        <argsstring>(control-&gt;active_producers().producers.size() !=6)</argsstring>
        <name>while</name>
        <param>
          <type>control-&gt;active_producers().producers.size() !</type>
          <defval>6</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="275" column="4" bodyfile="system/tests/eosio.wrap_tests.cpp" bodystart="275" bodyend="277"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1a0feac2e6d7980da3b237e77826ecf3aa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>BOOST_REQUIRE_EXCEPTION</definition>
        <argsstring>(approve(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;newprod1&quot;_n), eosio_assert_message_exception, eosio_assert_message_is(&quot;approval is not on the list of requested approvals&quot;))</argsstring>
        <name>BOOST_REQUIRE_EXCEPTION</name>
        <param>
          <type><ref refid="eosio_8wrap__tests_8cpp_1aec2140fc68c4f6b854b5d07289c3f5ef" kindref="member">approve</ref>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;newprod1&quot;_n)</type>
        </param>
        <param>
          <type><ref refid="eosio_8wrap__tests_8cpp_1ab76bd4660c490cd9938c4daad9c92077" kindref="member">eosio_assert_message_exception</ref></type>
        </param>
        <param>
          <type><ref refid="eosio_8wrap__tests_8cpp_1ae53689a88727b2583f9317c0b61ff4fd" kindref="member">eosio_assert_message_is</ref>(&quot;approval is not on the list of requested approvals&quot;)</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="295" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="295" declcolumn="4"/>
      </memberdef>
      <memberdef kind="function" id="eosio_8wrap__tests_8cpp_1aec2140fc68c4f6b854b5d07289c3f5ef" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>approve</definition>
        <argsstring>(&quot;carol&quot;_n, &quot;first&quot;_n, &quot;prod5&quot;_n)</argsstring>
        <name>approve</name>
        <param>
          <type>&quot;carol&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;first&quot;</type>
          <declname>_n</declname>
        </param>
        <param>
          <type>&quot;prod5&quot;</type>
          <declname>_n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="system/tests/eosio.wrap_tests.cpp" line="301" column="4" declfile="system/tests/eosio.wrap_tests.cpp" declline="301" declcolumn="4"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&lt;boost/test/unit_test.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;eosio/testing/tester.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;eosio/chain/abi_serializer.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;fc/variant_object.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;contracts.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal">eosio::testing;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal"><ref refid="namespaceeosio" kindref="compound">eosio</ref>;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal">eosio::chain;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal">eosio::testing;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal">fc;</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="eosio_8msig__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref><sp/>=<sp/>fc::mutable_variant_object;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="classeosio__wrap__tester" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classeosio__wrap__tester" kindref="compound">eosio_wrap_tester</ref><sp/>:<sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>tester<sp/>{</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><ref refid="classeosio__wrap__tester_1a16769250ac07aefd4a9799dbd3888155" kindref="member">eosio_wrap_tester</ref>()<sp/>{</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a67926f84ff8b458db07f5aaddf296176" kindref="member">create_accounts</ref>(<sp/>{<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod5&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n<sp/>}<sp/>);</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd47bbc7b84947d84c8f8cf805c916b8" kindref="member">produce_block</ref>();</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">base_tester::push_action</ref>(config::system_account_name,<sp/></highlight><highlight class="stringliteral">&quot;setpriv&quot;</highlight><highlight class="normal">_n,</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config::system_account_name,<sp/><sp/>mutable_variant_object()</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;account&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;is_priv&quot;</highlight><highlight class="normal">,<sp/>1)</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1af4f93295a7ab104772c663b0dbb1ccf8" kindref="member">set_code</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/>contracts::msig_wasm()<sp/>);</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a8a77e98251d23bebd48d6cf91446d3b8" kindref="member">set_abi</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/>contracts::msig_abi().data()<sp/>);</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1adefc7199951e45337d8c056d7803f62c" kindref="member">produce_blocks</ref>();</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>signed_transaction<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>set_transaction_headers(<ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>);</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structauthority" kindref="compound">authority</ref><sp/>auth(<sp/>1,<sp/>{},<sp/>{{{config::system_account_name,<sp/>config::active_name},<sp/>1}}<sp/>);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>.actions.emplace_back(<sp/>vector&lt;permission_level&gt;{{config::system_account_name,<sp/>config::active_name}},</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newaccount{</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.creator<sp/><sp/>=<sp/>config::system_account_name,</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.name<sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">_n,</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.owner<sp/><sp/><sp/><sp/>=<sp/>auth,</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.active<sp/><sp/><sp/>=<sp/>auth,</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>set_transaction_headers(<ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>.sign(<sp/>get_private_key(<sp/>config::system_account_name,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal"><sp/>),<sp/>control-&gt;get_chain_id()<sp/><sp/>);</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>push_transaction(<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>);</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">base_tester::push_action</ref>(config::system_account_name,<sp/></highlight><highlight class="stringliteral">&quot;setpriv&quot;</highlight><highlight class="normal">_n,</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config::system_account_name,<sp/><sp/>mutable_variant_object()</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;account&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;is_priv&quot;</highlight><highlight class="normal">,<sp/>1)</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>system_private_key<sp/>=<sp/>get_private_key(<sp/>config::system_account_name,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1af4f93295a7ab104772c663b0dbb1ccf8" kindref="member">set_code</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">_n,<sp/>contracts::wrap_wasm(),<sp/>&amp;system_private_key<sp/>);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a8a77e98251d23bebd48d6cf91446d3b8" kindref="member">set_abi</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">_n,<sp/>contracts::wrap_abi().data(),<sp/>&amp;system_private_key<sp/>);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1adefc7199951e45337d8c056d7803f62c" kindref="member">produce_blocks</ref>();</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>set_authority(<sp/>config::system_account_name,<sp/>config::active_name,</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8system__tests_8cpp_1a35b8e7393c92883d1720af8bf00903e8" kindref="member">authority</ref>(<sp/>1,<sp/>{{get_public_key(<sp/>config::system_account_name,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal"><sp/>),<sp/>1}},</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{{config::producers_account_name,<sp/>config::active_name},<sp/>1}}<sp/>),</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config::owner_name,</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>{<sp/>config::system_account_name,<sp/>config::owner_name<sp/>}<sp/>},</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>get_private_key(<sp/>config::system_account_name,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal"><sp/>)<sp/>}</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1aa8a24bdd630af0aa17f02c9802a75134" kindref="member">set_producers</ref>(<sp/>{</highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod5&quot;</highlight><highlight class="normal">_n}<sp/>);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1adefc7199951e45337d8c056d7803f62c" kindref="member">produce_blocks</ref>();</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>control-&gt;pending_block_producer().to_string()<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;eosio&quot;</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd47bbc7b84947d84c8f8cf805c916b8" kindref="member">produce_block</ref>();</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classeosio__wrap__tester_1a5f6d2856669577e22f3f1f2cff71030f" kindref="member">propose</ref>(<sp/>name<sp/><ref refid="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" kindref="member">proposer</ref>,<sp/>name<sp/>proposal_name,<sp/>vector&lt;permission_level&gt;<sp/>requested_permissions,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>transaction&amp;<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">push_action</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;propose&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" kindref="member">proposer</ref>,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" kindref="member">proposer</ref>)</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposal_name&quot;</highlight><highlight class="normal">,<sp/>proposal_name)</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;requested&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/>requested_permissions)</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;trx&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>)</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classeosio__wrap__tester_1af293cc197550f4a892eb96ffca162b48" kindref="member">approve</ref>(<sp/>name<sp/><ref refid="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" kindref="member">proposer</ref>,<sp/>name<sp/>proposal_name,<sp/>name<sp/>approver<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">push_action</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;approve&quot;</highlight><highlight class="normal">_n,<sp/>approver,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" kindref="member">proposer</ref>)</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposal_name&quot;</highlight><highlight class="normal">,<sp/>proposal_name)</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;level&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{approver,<sp/>config::active_name}<sp/>)</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classeosio__wrap__tester_1a640df1c8559085b577c7350a38cb171b" kindref="member">unapprove</ref>(<sp/>name<sp/><ref refid="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" kindref="member">proposer</ref>,<sp/>name<sp/>proposal_name,<sp/>name<sp/>unapprover<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">push_action</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;unapprove&quot;</highlight><highlight class="normal">_n,<sp/>unapprover,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1ab724f733e7563decf08c3a7b40f940db" kindref="member">proposer</ref>)</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposal_name&quot;</highlight><highlight class="normal">,<sp/>proposal_name)</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;level&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{unapprover,<sp/>config::active_name})</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/>transaction<sp/><ref refid="classeosio__wrap__tester_1a0e0a3b21a115f1416b098fcc1627e9ba" kindref="member">wrap_exec</ref>(<sp/>account_name<sp/>executer,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>transaction&amp;<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>,<sp/>uint32_t<sp/>expiration<sp/>=<sp/>base_tester::DEFAULT_EXPIRATION_DELTA<sp/>);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/>transaction<sp/><ref refid="classeosio__wrap__tester_1a0db68a2a12036459525e4d52dc820027" kindref="member">reqauth</ref>(<sp/>account_name<sp/>from,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>vector&lt;permission_level&gt;&amp;<sp/>auths,<sp/>uint32_t<sp/>expiration<sp/>=<sp/>base_tester::DEFAULT_EXPIRATION_DELTA<sp/>);</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classeosio__wrap__tester_1a3bc694e07173b6c0815a5ffeabcd5d4c" kindref="member">check_traces</ref>(transaction_trace_ptr<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>,<sp/>std::vector&lt;std::map&lt;std::string,<sp/>name&gt;&gt;<sp/>res);</highlight></codeline>
<codeline lineno="110"><highlight class="normal">};</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal">transaction<sp/><ref refid="classeosio__wrap__tester_1a0e0a3b21a115f1416b098fcc1627e9ba" kindref="member">eosio_wrap_tester::wrap_exec</ref>(<sp/>account_name<sp/>executer,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>transaction&amp;<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>,<sp/>uint32_t<sp/>expiration<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/>fc::variants<sp/>v;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/>v.push_back(<sp/>fc::mutable_variant_object()</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;actor&quot;</highlight><highlight class="normal">,<sp/>executer)</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;permission&quot;</highlight><highlight class="normal">,<sp/>name{config::active_name})</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/>v.push_back(<sp/>fc::mutable_variant_object()</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;actor&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;permission&quot;</highlight><highlight class="normal">,<sp/>name{config::active_name})</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>act_obj<sp/>=<sp/>fc::mutable_variant_object()</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;account&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;authorization&quot;</highlight><highlight class="normal">,<sp/>v)</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;data&quot;</highlight><highlight class="normal">,<sp/>fc::mutable_variant_object()(</highlight><highlight class="stringliteral">&quot;executer&quot;</highlight><highlight class="normal">,<sp/>executer)(</highlight><highlight class="stringliteral">&quot;trx&quot;</highlight><highlight class="normal">,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>)<sp/>);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/>transaction<sp/><ref refid="eosio_8msig__tests_8cpp_1a7cdecec10d916d913f5be3a8cf624e5b" kindref="member">trx2</ref>;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/>set_transaction_headers(<ref refid="eosio_8msig__tests_8cpp_1a7cdecec10d916d913f5be3a8cf624e5b" kindref="member">trx2</ref>,<sp/>expiration);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/>action<sp/><ref refid="eosio_8msig__tests_8cpp_1a7543cef806423d999bdf00434e158dcb" kindref="member">act</ref>;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/>abi_serializer::from_variant(<sp/>act_obj,<sp/><ref refid="eosio_8msig__tests_8cpp_1a7543cef806423d999bdf00434e158dcb" kindref="member">act</ref>,<sp/>get_resolver(),<sp/>abi_serializer::create_yield_function(abi_serializer_max_time)<sp/>);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a7cdecec10d916d913f5be3a8cf624e5b" kindref="member">trx2</ref>.actions.push_back(<sp/>std::move(<ref refid="eosio_8msig__tests_8cpp_1a7543cef806423d999bdf00434e158dcb" kindref="member">act</ref>)<sp/>);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="eosio_8msig__tests_8cpp_1a7cdecec10d916d913f5be3a8cf624e5b" kindref="member">trx2</ref>;</highlight></codeline>
<codeline lineno="133"><highlight class="normal">}</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal">transaction<sp/><ref refid="classeosio__wrap__tester_1a0db68a2a12036459525e4d52dc820027" kindref="member">eosio_wrap_tester::reqauth</ref>(<sp/>account_name<sp/>from,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>vector&lt;permission_level&gt;&amp;<sp/>auths,<sp/>uint32_t<sp/>expiration<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/>fc::variants<sp/>v;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>level<sp/>:<sp/>auths<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>v.push_back(fc::mutable_variant_object()</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;actor&quot;</highlight><highlight class="normal">,<sp/>level.actor)</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;permission&quot;</highlight><highlight class="normal">,<sp/>level.permission)</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>act_obj<sp/>=<sp/>fc::mutable_variant_object()</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;account&quot;</highlight><highlight class="normal">,<sp/>name{config::system_account_name})</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;reqauth&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;authorization&quot;</highlight><highlight class="normal">,<sp/>v)</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;data&quot;</highlight><highlight class="normal">,<sp/>fc::mutable_variant_object()<sp/>(</highlight><highlight class="stringliteral">&quot;from&quot;</highlight><highlight class="normal">,<sp/>from)<sp/>);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/>transaction<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/>set_transaction_headers(<ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>,<sp/>expiration);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/>action<sp/><ref refid="eosio_8msig__tests_8cpp_1a7543cef806423d999bdf00434e158dcb" kindref="member">act</ref>;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/>abi_serializer::from_variant(<sp/>act_obj,<sp/><ref refid="eosio_8msig__tests_8cpp_1a7543cef806423d999bdf00434e158dcb" kindref="member">act</ref>,<sp/>get_resolver(),<sp/>abi_serializer::create_yield_function(abi_serializer_max_time)<sp/>);</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>.actions.push_back(<sp/>std::move(<ref refid="eosio_8msig__tests_8cpp_1a7543cef806423d999bdf00434e158dcb" kindref="member">act</ref>)<sp/>);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>;</highlight></codeline>
<codeline lineno="154"><highlight class="normal">}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classeosio__wrap__tester_1a3bc694e07173b6c0815a5ffeabcd5d4c" kindref="member">eosio_wrap_tester::check_traces</ref>(transaction_trace_ptr<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>,<sp/>std::vector&lt;std::map&lt;std::string,<sp/>name&gt;&gt;<sp/>res)<sp/>{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8system__blockinfo__tests_8cpp_1a471c6cb052d56a242d74b9e9d0fa9375" kindref="member">BOOST_REQUIRE</ref>(<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal">(<ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>)<sp/>);</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1aaf2833c9a5715e915885ca9b3f1d95e5" kindref="member">BOOST_REQUIRE_EQUAL</ref>(<sp/>transaction_receipt::executed,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>-&gt;receipt-&gt;status<sp/>);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1aaf2833c9a5715e915885ca9b3f1d95e5" kindref="member">BOOST_REQUIRE_EQUAL</ref>(<sp/>res.size(),<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>-&gt;action_traces.size()<sp/>);</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>res.size();<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>cur_action<sp/>=<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>-&gt;action_traces.at(i);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1aaf2833c9a5715e915885ca9b3f1d95e5" kindref="member">BOOST_REQUIRE_EQUAL</ref>(<sp/>res[i][</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">],<sp/>cur_action.receiver<sp/>);</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1aaf2833c9a5715e915885ca9b3f1d95e5" kindref="member">BOOST_REQUIRE_EQUAL</ref>(<sp/>res[i][</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">],<sp/>cur_action.act.name<sp/>);</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="167"><highlight class="normal">}</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal">BOOST_AUTO_TEST_SUITE(eosio_wrap_tests)</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><ref refid="eosio_8wrap__tests_8cpp_1a2e65df94faff8c29f877ab179f19f91c" kindref="member">BOOST_FIXTURE_TEST_CASE</ref>(<sp/>wrap_exec_direct,<sp/><ref refid="classeosio__wrap__tester" kindref="compound">eosio_wrap_tester</ref><sp/>)<sp/></highlight><highlight class="keyword">try</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>=<sp/>reqauth(<sp/></highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>{<ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{</highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>config::active_name}}<sp/>);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/>signed_transaction<sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref>(<sp/>wrap_exec(<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>),<sp/>{},<sp/>{}<sp/>);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref>.sign(<sp/>get_private_key(<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal"><sp/>),<sp/>control-&gt;get_chain_id()<sp/>);</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>actor<sp/>:<sp/>{</highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n}<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref>.sign(<sp/>get_private_key(<sp/>actor,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal"><sp/>),<sp/>control-&gt;get_chain_id()<sp/>);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/>transaction_trace_ptr<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref><sp/>=<sp/>push_transaction(<sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref><sp/>);</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1afe9f4ddeb5ea957f9f05f6770adcbb8e" kindref="member">check_traces</ref>(<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>,<sp/>{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n}},<sp/></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/>config::system_account_name},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;reqauth&quot;</highlight><highlight class="normal">_n}}</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>);</highlight></codeline>
<codeline lineno="185"><highlight class="normal">}<sp/><ref refid="eosio_8wrap__tests_8cpp_1a57b9f3fe8c9902c50c6f8f628bad2360" kindref="member">FC_LOG_AND_RETHROW</ref>()</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><ref refid="eosio_8wrap__tests_8cpp_1a2e65df94faff8c29f877ab179f19f91c" kindref="member">BOOST_FIXTURE_TEST_CASE</ref>(<sp/>wrap_with_msig,<sp/><ref refid="classeosio__wrap__tester" kindref="compound">eosio_wrap_tester</ref><sp/>)<sp/><ref refid="eosio_8wrap__tests_8cpp_1ae12fdfc810abe8198d2e99024387b8f8" kindref="member">try</ref><sp/>{</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>=<sp/>reqauth(<sp/></highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>{<ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{</highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>config::active_name}}<sp/>);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref><sp/>=<sp/>wrap_exec(<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>);</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1aa95225721099067970875bff95a0d4a6" kindref="member">propose</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>{</highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod5&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n}<sp/>},</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref><sp/>);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n<sp/>);<sp/></highlight><highlight class="comment">//<sp/>alice<sp/>must<sp/>approve<sp/>since<sp/>she<sp/>is<sp/>the<sp/>executer<sp/>of<sp/>the<sp/>wrap::exec<sp/>action</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>More<sp/>than<sp/>2/3<sp/>of<sp/>block<sp/>producers<sp/>approve</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>the<sp/>proposal<sp/>should<sp/>be<sp/>ready<sp/>to<sp/>execute</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/>transaction_trace_ptr<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref><sp/>=<sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">push_action</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposal_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;executer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1afe9f4ddeb5ea957f9f05f6770adcbb8e" kindref="member">check_traces</ref>(<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>,<sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n}},<sp/></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n}},</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/>config::system_account_name},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;reqauth&quot;</highlight><highlight class="normal">_n}}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>);</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal">}<sp/><ref refid="eosio_8wrap__tests_8cpp_1a57b9f3fe8c9902c50c6f8f628bad2360" kindref="member">FC_LOG_AND_RETHROW</ref>()</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><ref refid="eosio_8wrap__tests_8cpp_1a2e65df94faff8c29f877ab179f19f91c" kindref="member">BOOST_FIXTURE_TEST_CASE</ref>(<sp/>wrap_with_msig_unapprove,<sp/><ref refid="classeosio__wrap__tester" kindref="compound">eosio_wrap_tester</ref><sp/>)<sp/><ref refid="eosio_8wrap__tests_8cpp_1ae12fdfc810abe8198d2e99024387b8f8" kindref="member">try</ref><sp/>{</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>=<sp/>reqauth(<sp/></highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>{<ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{</highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>config::active_name}}<sp/>);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref><sp/>=<sp/>wrap_exec(<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1aa95225721099067970875bff95a0d4a6" kindref="member">propose</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>{</highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod5&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n}<sp/>},</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref><sp/>);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n<sp/>);<sp/></highlight><highlight class="comment">//<sp/>alice<sp/>must<sp/>approve<sp/>since<sp/>she<sp/>is<sp/>the<sp/>executer<sp/>of<sp/>the<sp/>wrap::exec<sp/>action</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>3<sp/>of<sp/>the<sp/>4<sp/>needed<sp/>producers<sp/>approve</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>first<sp/>producer<sp/>takes<sp/>back<sp/>approval</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1aded4b3d8eebe870ef53b78ea95a1cef6" kindref="member">unapprove</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>fourth<sp/>producer<sp/>approves<sp/>but<sp/>the<sp/>total<sp/>number<sp/>of<sp/>approving<sp/>producers<sp/>is<sp/>still<sp/>3<sp/>which<sp/>is<sp/>less<sp/>than<sp/>two-thirds<sp/>of<sp/>producers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd47bbc7b84947d84c8f8cf805c916b8" kindref="member">produce_block</ref>();</highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>proposal<sp/>should<sp/>not<sp/>have<sp/>sufficient<sp/>approvals<sp/>to<sp/>pass<sp/>the<sp/>authorization<sp/>checks<sp/>of<sp/>eosio.wrap::exec.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a0feac2e6d7980da3b237e77826ecf3aa" kindref="member">BOOST_REQUIRE_EXCEPTION</ref>(<sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">push_action</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposal_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;executer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),<sp/><ref refid="eosio_8wrap__tests_8cpp_1ab76bd4660c490cd9938c4daad9c92077" kindref="member">eosio_assert_message_exception</ref>,</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1ae53689a88727b2583f9317c0b61ff4fd" kindref="member">eosio_assert_message_is</ref>(</highlight><highlight class="stringliteral">&quot;transaction<sp/>authorization<sp/>failed&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal">}<sp/><ref refid="eosio_8wrap__tests_8cpp_1a57b9f3fe8c9902c50c6f8f628bad2360" kindref="member">FC_LOG_AND_RETHROW</ref>()</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><ref refid="eosio_8wrap__tests_8cpp_1a2e65df94faff8c29f877ab179f19f91c" kindref="member">BOOST_FIXTURE_TEST_CASE</ref>(<sp/>wrap_with_msig_producers_change,<sp/><ref refid="classeosio__wrap__tester" kindref="compound">eosio_wrap_tester</ref><sp/>)<sp/><ref refid="eosio_8wrap__tests_8cpp_1ae12fdfc810abe8198d2e99024387b8f8" kindref="member">try</ref><sp/>{</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8msig__tests_8cpp_1a67926f84ff8b458db07f5aaddf296176" kindref="member">create_accounts</ref>(<sp/>{<sp/></highlight><highlight class="stringliteral">&quot;newprod1&quot;</highlight><highlight class="normal">_n<sp/>}<sp/>);</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref><sp/>=<sp/>reqauth(<sp/></highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>{<ref refid="eosio_8msig__tests_8cpp_1adb5a7af6f4a8319d70ccf6363031f4dc" kindref="member">permission_level</ref>{</highlight><highlight class="stringliteral">&quot;bob&quot;</highlight><highlight class="normal">_n,<sp/>config::active_name}},<sp/>120<sp/>);</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref><sp/>=<sp/>wrap_exec(<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a71f8a7e8309c11570395f40482983deb" kindref="member">trx</ref>,<sp/>36000<sp/>);</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1aa95225721099067970875bff95a0d4a6" kindref="member">propose</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>{</highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;prod5&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;active&quot;</highlight><highlight class="normal">_n}<sp/>},</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd3556dd283eb44aa4d4f9ffbfefba30" kindref="member">wrap_trx</ref><sp/>);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n<sp/>);<sp/></highlight><highlight class="comment">//<sp/>alice<sp/>must<sp/>approve<sp/>since<sp/>she<sp/>is<sp/>the<sp/>executer<sp/>of<sp/>the<sp/>wrap::exec<sp/>action</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>2<sp/>of<sp/>the<sp/>4<sp/>needed<sp/>producers<sp/>approve</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd47bbc7b84947d84c8f8cf805c916b8" kindref="member">produce_block</ref>();</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1aa8a24bdd630af0aa17f02c9802a75134" kindref="member">set_producers</ref>(<sp/>{</highlight><highlight class="stringliteral">&quot;prod1&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod2&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod5&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;newprod1&quot;</highlight><highlight class="normal">_n}<sp/>);<sp/></highlight><highlight class="comment">//<sp/>With<sp/>6<sp/>producers,<sp/>the<sp/>2/3+1<sp/>threshold<sp/>becomes<sp/>5</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>control-&gt;active_producers().producers.size()<sp/>!=<sp/>6<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd47bbc7b84947d84c8f8cf805c916b8" kindref="member">produce_block</ref>();</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>two<sp/>more<sp/>block<sp/>producers<sp/>approve<sp/>which<sp/>would<sp/>have<sp/>been<sp/>sufficient<sp/>under<sp/>the<sp/>old<sp/>schedule<sp/>but<sp/>not<sp/>the<sp/>new<sp/>one.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod3&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod4&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1abd47bbc7b84947d84c8f8cf805c916b8" kindref="member">produce_block</ref>();</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>proposal<sp/>has<sp/>four<sp/>of<sp/>the<sp/>five<sp/>requested<sp/>approvals<sp/>but<sp/>they<sp/>are<sp/>not<sp/>sufficient<sp/>to<sp/>satisfy<sp/>the<sp/>authorization<sp/>checks<sp/>of<sp/>eosio.wrap::exec.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a0feac2e6d7980da3b237e77826ecf3aa" kindref="member">BOOST_REQUIRE_EXCEPTION</ref>(<sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">push_action</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposal_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;executer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),<sp/><ref refid="eosio_8wrap__tests_8cpp_1ab76bd4660c490cd9938c4daad9c92077" kindref="member">eosio_assert_message_exception</ref>,</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1ae53689a88727b2583f9317c0b61ff4fd" kindref="member">eosio_assert_message_is</ref>(</highlight><highlight class="stringliteral">&quot;transaction<sp/>authorization<sp/>failed&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Unfortunately<sp/>the<sp/>new<sp/>producer<sp/>cannot<sp/>approve<sp/>because<sp/>they<sp/>were<sp/>not<sp/>in<sp/>the<sp/>original<sp/>requested<sp/>approvals.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a0feac2e6d7980da3b237e77826ecf3aa" kindref="member">BOOST_REQUIRE_EXCEPTION</ref>(<sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;newprod1&quot;</highlight><highlight class="normal">_n<sp/>),</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1ab76bd4660c490cd9938c4daad9c92077" kindref="member">eosio_assert_message_exception</ref>,</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1ae53689a88727b2583f9317c0b61ff4fd" kindref="member">eosio_assert_message_is</ref>(</highlight><highlight class="stringliteral">&quot;approval<sp/>is<sp/>not<sp/>on<sp/>the<sp/>list<sp/>of<sp/>requested<sp/>approvals&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>But<sp/>prod5<sp/>still<sp/>can<sp/>provide<sp/>the<sp/>fifth<sp/>approval<sp/>necessary<sp/>to<sp/>satisfy<sp/>the<sp/>2/3+1<sp/>threshold<sp/>of<sp/>the<sp/>new<sp/>producer<sp/>set</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1a84898fa09d41586e4d9e4654a708801f" kindref="member">approve</ref>(<sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;prod5&quot;</highlight><highlight class="normal">_n<sp/>);</highlight></codeline>
<codeline lineno="302"><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>the<sp/>proposal<sp/>should<sp/>be<sp/>ready<sp/>to<sp/>execute</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/>transaction_trace_ptr<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref><sp/>=<sp/><ref refid="eosio_8msig__tests_8cpp_1a42fbaa315b85eaef150483397c76fb62" kindref="member">push_action</ref>(<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n,<sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">_n,<sp/><ref refid="eosio_8wrap__tests_8cpp_1a9ce1cc08f10fbc96c3b7c68675653163" kindref="member">mvo</ref>()</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposal_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;first&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;proposer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;carol&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;executer&quot;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;alice&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><ref refid="eosio_8wrap__tests_8cpp_1afe9f4ddeb5ea957f9f05f6770adcbb8e" kindref="member">check_traces</ref>(<sp/><ref refid="eosio_8wrap__tests_8cpp_1a176b44375feec0c1f90f3bde5f1feb2e" kindref="member">trace</ref>,<sp/>{</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.msig&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n}},<sp/></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;eosio.wrap&quot;</highlight><highlight class="normal">_n},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;exec&quot;</highlight><highlight class="normal">_n}},</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{{</highlight><highlight class="stringliteral">&quot;receiver&quot;</highlight><highlight class="normal">,<sp/>config::system_account_name},<sp/>{</highlight><highlight class="stringliteral">&quot;act_name&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;reqauth&quot;</highlight><highlight class="normal">_n}}</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>);</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal">}<sp/><ref refid="eosio_8wrap__tests_8cpp_1a57b9f3fe8c9902c50c6f8f628bad2360" kindref="member">FC_LOG_AND_RETHROW</ref>()</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal">BOOST_AUTO_TEST_SUITE_END()</highlight></codeline>
    </programlisting>
    <location file="system/tests/eosio.wrap_tests.cpp"/>
  </compounddef>
</doxygen>
