<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.3" xml:lang="en-US">
  <compounddef id="md_system__r_e_a_d_m_e" kind="page">
    <compoundname>md_system_README</compoundname>
    <title>Reference contracts</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Reference contracts are a collection of contracts deployable to an <ulink url="https://github.com/AntelopeIO">Antelope</ulink> blockchain which implements a lot of critical functionality that goes beyond what is provided by the base Antelope protocol.</para>
<para>The Antelope protocol includes capabilities such as:<itemizedlist>
<listitem><para>an accounts and permissions system which enables a flexible permission system that allows authorization authority over specific actions in a transaction to be satisfied by the appropriate combination of signatures;</para>
</listitem><listitem><para>a consensus algorithm to propose and finalize blocks by a set of active block producers that can be arbitrarily selected by privileged smart contracts running on the blockchain;</para>
</listitem><listitem><para>a basic resource management system that tracks usage of CPU/NET and RAM per account and enforces limits based on per-account quotas that can be adjusted by privileged smart contracts.</para>
</listitem></itemizedlist>
</para>
<para>However, the Antelope protocol itself does not immediately provide:<itemizedlist>
<listitem><para>a mechanism for multiple accounts to reach consensus on authorization of a proposed transaction on-chain before executing it;</para>
</listitem><listitem><para>a consensus mechanism that goes beyond the consensus algorithm to determine how block producers are selected and to align incentives by providing appropriate rewards and punishments to block producers or the entities that get them into that position;</para>
</listitem><listitem><para>more sophisticated resource management systems that create markets for users to acquire resource rights;</para>
</listitem><listitem><para>or, even something as seemingly basic as the concept of tokens (whether fungible or non-fungible).</para>
</listitem></itemizedlist>
</para>
<para>The reference contracts in this repository provide all of the above and more by building higher-level features or abstractions on top of the primitive mechanisms provided by the Antelope protocol.</para>
<para>The collection of reference contracts consists of the following individual contracts:</para>
<para><itemizedlist>
<listitem><para><ulink url="contracts/eosio.boot/include/eosio.boot/eosio.boot.hpp">boot contract</ulink>: A minimal contract that only serves the purpose of activating protocol features which enables other more sophisticated contracts to be deployed onto the blockchain. (Note: this contract must be deployed to the privileged <computeroutput>eosio</computeroutput> account.)</para>
</listitem><listitem><para><ulink url="contracts/eosio.bios/include/eosio.bios/eosio.bios.hpp">bios contract</ulink>: A simple alternative to the core contract which is suitable for test chains or perhaps centralized blockchains. (Note: this contract must be deployed to the privileged <computeroutput>eosio</computeroutput> account.)</para>
</listitem><listitem><para><ulink url="contracts/eosio.token/include/eosio.token/eosio.token.hpp">token contract</ulink>: A contract enabling fungible tokens.</para>
</listitem><listitem><para><ulink url="contracts/eosio.system/include/eosio.system/eosio.system.hpp">core contract</ulink>: A monolithic contract that includes a variety of different functions which enhances a base Antelope blockchain for use as a public, decentralized blockchain in an opinionated way. (Note: This contract must be deployed to the privileged <computeroutput>eosio</computeroutput> account. Additionally, this contract requires that the token contract is deployed to the <computeroutput><ref refid="classeosio_1_1token" kindref="compound">eosio.token</ref></computeroutput> account and has already been used to setup the core token.) The functions contained within this monolithic contract include (non-exhaustive):<itemizedlist>
<listitem><para>Delegated Proof of Stake (DPoS) consensus mechanism for selecting and paying (via core token inflation) a set of block producers that are chosen through delegation of the staked core tokens.</para>
</listitem><listitem><para>Allocation of CPU/NET resources based on core tokens in which the core tokens are either staked for an indefinite allocation of some fraction of available CPU/NET resources, or they are paid as a fee in exchange for a time-limited allocation of CPU/NET resources via REX or via PowerUp.</para>
</listitem><listitem><para>An automated market maker enabling a market for RAM resources which allows users to buy or sell available RAM allocations.</para>
</listitem><listitem><para>An auction for bidding for premium account names.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para><ulink url="contracts/eosio.msig/include/eosio.msig/eosio.msig.hpp">multisig contract</ulink>: A contract that enables proposing Antelope transactions on the blockchain, collecting authorization approvals for many accounts, and then executing the actions within the transaction after authorization requirements of the transaction have been reached. (Note: this contract must be deployed to a privileged account.)</para>
</listitem><listitem><para><ulink url="contracts/eosio.wrap/include/eosio.wrap/eosio.wrap.hpp">wrap contract</ulink>: A contract that wraps around any Antelope transaction and allows for executing its actions without needing to satisfy the authorization requirements of the transaction. If used, the permissions of the account hosting this contract should be configured to only allow highly trusted parties (e.g. the operators of the blockchain) to have the ability to execute its actions. (Note: this contract must be deployed to a privileged account.)</para>
</listitem></itemizedlist>
</para>
<sect1 id="md_system__r_e_a_d_m_e_1autotoc_md355">
<title>Repository organization</title>
<para>The <computeroutput>main</computeroutput> branch contains the latest state of development; do not use this for production. Refer to the <ulink url="https://github.com/AntelopeIO/reference-contracts/releases">releases page</ulink> for current information on releases, pre-releases, and obsolete releases as well as the corresponding tags for those releases.</para>
</sect1>
<sect1 id="md_system__r_e_a_d_m_e_1autotoc_md356">
<title>Supported Operating Systems</title>
<para><ulink url="https://github.com/AntelopeIO/cdt">CDT</ulink> is required to build contracts. Any operating systems supported by CDT is sufficient to build the reference contracts.</para>
<para>To build and run the tests as well, <ulink url="https://github.com/AntelopeIO/leap">Leap</ulink> is also required as a dependency, which may have its further restrictions on supported operating systems. </para>
</sect1>
<sect1 id="md_system__r_e_a_d_m_e_1autotoc_md357">
<title>Building</title>
<para>The build guide below will assume you are running Ubuntu 20.04. However, as mentioned above, other operating systems may also be supported.</para>
<sect2 id="md_system__r_e_a_d_m_e_1autotoc_md358">
<title>Build or install CDT dependency</title>
<para>The CDT dependency is required with a minimum version of 3.0.</para>
<para>The easiest way to satisfy this dependency is to install CDT on your system through a package. Find the release of a compatible version of CDT from its <ulink url="https://github.com/AntelopeIO/cdt/releases">releases page</ulink>, download the package file appropriate for your OS from the attached assets, and install the package.</para>
<para>Alternatively, you can build CDT from source. Please refer to the guide in the <ulink url="https://github.com/AntelopeIO/cdt#building-from-source">CDT README</ulink> for instructions on how to do this. If you choose to go with building CDT from source, please keep the path to the build directory in the shell environment variable <computeroutput>CDT_BUILD_PATH</computeroutput> for later use when building the reference contracts.</para>
</sect2>
<sect2 id="md_system__r_e_a_d_m_e_1autotoc_md359">
<title>Optionally build Leap dependency</title>
<para>The Leap dependency is optional. It is only needed if you wish to also build the tests using the <computeroutput>BUILD_TESTS</computeroutput> CMake flag.</para>
<para>Unfortunately, it is not currently possible to satisfy the contract testing dependencies through the Leap packages made available from the <ulink url="https://github.com/AntelopeIO/leap/releases">Leap releases page</ulink>. So if you want to build the contract tests, you will first need to build Leap from source.</para>
<para>Please refer to the guide in the <ulink url="https://github.com/AntelopeIO/leap#building-from-source">Leap README</ulink> for instructions on how to do this. If you choose to go with building Leap from source, please keep the path to the build directory in the shell environment variable <computeroutput>LEAP_BUILD_PATH</computeroutput> for later use when building the reference contracts.</para>
</sect2>
<sect2 id="md_system__r_e_a_d_m_e_1autotoc_md360">
<title>Build reference contracts</title>
<para>Beyond CDT and optionally Leap (if also building the tests), no additional dependencies are required to build the reference contracts.</para>
<para>The instructions below assume you are building the reference contracts with tests, have already built Leap from source, and have the CDT dependency installed on your system. For some other configurations, expand the hidden panels placed lower within this section.</para>
<para>For all configurations, you should first <computeroutput>cd</computeroutput> into the directory containing cloned reference contracts repository.</para>
<para>Build reference contracts with tests using Leap built from source and with installed CDT package:</para>
<para><programlisting><codeline><highlight class="normal">mkdir<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cmake<sp/>-DCMAKE_BUILD_TYPE=Release<sp/>-DBUILD_TESTS=ON<sp/>-Dleap_DIR=&quot;${LEAP_BUILD_PATH}/lib/cmake/leap&quot;<sp/>..</highlight></codeline>
<codeline><highlight class="normal">make<sp/>-j<sp/>$(nproc)</highlight></codeline>
</programlisting></para>
<para><bold>Note:</bold> <computeroutput>CMAKE_BUILD_TYPE</computeroutput> has no impact on the WASM files generated for the contracts. It only impacts how the test binaries are built. Use <computeroutput>-DCMAKE_BUILD_TYPE=Debug</computeroutput> if you want to create test binaries that you can debug.</para>
<para><details> <summary>Build reference contracts with tests using Leap and CDT both built from source</summary></details></para>
<para><details><programlisting><codeline><highlight class="normal">mkdir<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cmake<sp/>-DCMAKE_BUILD_TYPE=Release<sp/>-DBUILD_TESTS=ON<sp/>-Dcdt_DIR=&quot;${CDT_BUILD_PATH}/lib/cmake/cdt&quot;<sp/>-Dleap_DIR=&quot;${LEAP_BUILD_PATH}/lib/cmake/leap&quot;<sp/>..</highlight></codeline>
<codeline><highlight class="normal">make<sp/>-j<sp/>$(nproc)</highlight></codeline>
</programlisting> </details></para>
<para><details> <summary>Build reference contracts without tests and with CDT build from source</summary></details></para>
<para><details><programlisting><codeline><highlight class="normal">mkdir<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cd<sp/>build</highlight></codeline>
<codeline><highlight class="normal">cmake<sp/>-DCMAKE_BUILD_TYPE=Release<sp/>-DBUILD_TESTS=OFF<sp/>-Dcdt_DIR=&quot;${CDT_BUILD_PATH}/lib/cmake/cdt&quot;<sp/>..</highlight></codeline>
<codeline><highlight class="normal">make<sp/>-j<sp/>$(nproc)</highlight></codeline>
</programlisting></details></para>
<para><details></details></para>
<sect3 id="md_system__r_e_a_d_m_e_1autotoc_md361">
<title>Supported CMake options</title>
<para>The following is a list of custom CMake options supported in building the reference contracts (default values are shown below):</para>
<para><programlisting><codeline><highlight class="normal">-DBUILD_TESTS=OFF<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Do<sp/>not<sp/>build<sp/>the<sp/>tests</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">-DSYSTEM_CONFIGURABLE_WASM_LIMITS=ON<sp/><sp/><sp/><sp/>Enable<sp/>use<sp/>of<sp/>the<sp/>CONFIGURABLE_WASM_LIMITS</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>protocol<sp/>feature</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">-DSYSTEM_BLOCKCHAIN_PARAMETERS=ON<sp/><sp/><sp/><sp/><sp/><sp/><sp/>Enable<sp/>use<sp/>of<sp/>the<sp/>BLOCKCHAIN_PARAMETERS</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>protocol<sp/>feature</highlight></codeline>
</programlisting></para>
</sect3>
</sect2>
<sect2 id="md_system__r_e_a_d_m_e_1autotoc_md362">
<title>Running tests</title>
<para>Assuming you built with <computeroutput>BUILD_TESTS=ON</computeroutput>, you can run the tests.</para>
<para><programlisting><codeline><highlight class="normal">cd<sp/>build/tests</highlight></codeline>
<codeline><highlight class="normal">ctest<sp/>-j<sp/>$(nproc)</highlight></codeline>
</programlisting></para>
</sect2>
</sect1>
<sect1 id="md_system__r_e_a_d_m_e_1autotoc_md363">
<title>License</title>
<para>[MIT](LICENSE) </para>
</sect1>
    </detaileddescription>
    <location file="system/README.md"/>
  </compounddef>
</doxygen>
