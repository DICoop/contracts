<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.3" xml:lang="en-US">
  <compounddef id="05__stake_8md" kind="file" language="Markdown">
    <compoundname>05_stake.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">---</highlight></codeline>
<codeline><highlight class="normal">content_title:<sp/>Staking<sp/>on<sp/>Antelope-based<sp/>blockchains</highlight></codeline>
<codeline><highlight class="normal">---</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>System<sp/>Resources</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Antelope-based<sp/>blockchains<sp/>work<sp/>with<sp/>three<sp/>system<sp/>resources:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>[RAM](02_ram.md)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[CPU](03_cpu.md)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[NET](04_net.md)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>How<sp/>To<sp/>Allocate<sp/>System<sp/>Resources</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Antelope-based<sp/>blockchain<sp/>accounts<sp/>need<sp/>sufficient<sp/>system<sp/>resources,<sp/>RAM,<sp/>CPU<sp/>and<sp/>NET,<sp/>to<sp/>interact<sp/>with<sp/>the<sp/>smart<sp/>contracts<sp/>deployed<sp/>on<sp/>the<sp/>blockchain.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Stake<sp/>NET<sp/>and<sp/>CPU</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>CPU<sp/>and<sp/>NET<sp/>system<sp/>resources<sp/>are<sp/>allocated<sp/>by<sp/>the<sp/>account<sp/>owner<sp/>via<sp/>the<sp/>staking<sp/>mechanism.<sp/>Refer<sp/>to<sp/>the<sp/>[cleos<sp/>manual](https://github.com/AntelopeIO/leap/blob/main/docs/02_cleos/02_how-to-guides/how-to-stake-resource.md)<sp/>on<sp/>how<sp/>to<sp/>do<sp/>it<sp/>via<sp/>the<sp/>command<sp/>line<sp/>interface.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>will<sp/>also<sp/>find<sp/>that<sp/>staking/unstaking<sp/>is<sp/>at<sp/>times<sp/>referred<sp/>to<sp/>as<sp/>delegating/undelegating.<sp/>The<sp/>economics<sp/>of<sp/>staking<sp/>is<sp/>also<sp/>to<sp/>provably<sp/>commit<sp/>to<sp/>a<sp/>promise<sp/>that<sp/>you<sp/>will<sp/>hold<sp/>the<sp/>staked<sp/>tokens,<sp/>either<sp/>for<sp/>NET<sp/>or<sp/>CPU,<sp/>for<sp/>a<sp/>pre-established<sp/>period<sp/>of<sp/>time,<sp/>in<sp/>spite<sp/>of<sp/>inflation<sp/>caused<sp/>by<sp/>minting<sp/>new<sp/>tokens<sp/>in<sp/>order<sp/>to<sp/>reward<sp/>BPs<sp/>for<sp/>their<sp/>services<sp/>every<sp/>24<sp/>hours.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">When<sp/>you<sp/>stake<sp/>tokens<sp/>for<sp/>CPU<sp/>and<sp/>NET,<sp/>you<sp/>gain<sp/>access<sp/>to<sp/>system<sp/>resources<sp/>proportional<sp/>to<sp/>the<sp/>total<sp/>amount<sp/>of<sp/>tokens<sp/>staked<sp/>by<sp/>all<sp/>other<sp/>users<sp/>for<sp/>the<sp/>same<sp/>system<sp/>resource<sp/>at<sp/>the<sp/>same<sp/>time.<sp/>This<sp/>means<sp/>you<sp/>can<sp/>execute<sp/>transactions<sp/>at<sp/>no<sp/>cost<sp/>but<sp/>in<sp/>the<sp/>limits<sp/>of<sp/>the<sp/>staked<sp/>tokens.<sp/>The<sp/>staked<sp/>tokens<sp/>guarantee<sp/>the<sp/>proportional<sp/>amount<sp/>of<sp/>resources<sp/>regardless<sp/>of<sp/>any<sp/>variations<sp/>in<sp/>the<sp/>free<sp/>market.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>an<sp/>account<sp/>consumes<sp/>all<sp/>its<sp/>allocated<sp/>CPU<sp/>and<sp/>NET<sp/>resources,<sp/>it<sp/>has<sp/>two<sp/>options:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>It<sp/>can<sp/>wait<sp/>for<sp/>the<sp/>blockchain<sp/>to<sp/>replenish<sp/>the<sp/>consumed<sp/>resources.<sp/>You<sp/>can<sp/>read<sp/>more<sp/>details<sp/>below<sp/>about<sp/>the<sp/>[system<sp/>resources<sp/>replenish<sp/>algorithm].(05_stake.md#System-Resources-Replenish-Algorithm).</highlight></codeline>
<codeline><highlight class="normal">*<sp/>It<sp/>can<sp/>allocate<sp/>more<sp/>resources<sp/>through<sp/>the<sp/>staking<sp/>mechanism.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">When<sp/>an<sp/>account<sp/>uses<sp/>the<sp/>allocated<sp/>resources,<sp/>the<sp/>amount<sp/>that<sp/>can<sp/>be<sp/>used<sp/>in<sp/>one<sp/>transaction<sp/>is<sp/>limited<sp/>by<sp/>predefine<sp/>[maximum<sp/>CPU](https://github.com/AntelopeIO/cdt/blob/main/libraries/eosiolib/contracts/eosio/privileged.hpp#L110),<sp/>[minimum<sp/>CPU](https://github.com/AntelopeIO/cdt/blob/main/libraries/eosiolib/contracts/eosio/privileged.hpp#L116),<sp/>and<sp/>[maximum<sp/>NET](https://github.com/AntelopeIO/cdt/blob/main/libraries/eosiolib/contracts/eosio/privileged.hpp#L69)<sp/>limits.<sp/>Transactions<sp/>executed<sp/>by<sp/>the<sp/>blockchain<sp/>contain<sp/>one<sp/>or<sp/>more<sp/>actions,<sp/>and<sp/>each<sp/>transaction<sp/>must<sp/>consume<sp/>an<sp/>amount<sp/>of<sp/>CPU<sp/>and<sp/>NET<sp/>which<sp/>is<sp/>in<sp/>the<sp/>limits<sp/>defined<sp/>by<sp/>the<sp/>aforementioned<sp/>blockchain<sp/>settings.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">####<sp/>System<sp/>Resources<sp/>Replenish<sp/>Algorithm</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Antelope-based<sp/>blockchains<sp/>replenish<sp/>automatically<sp/>the<sp/>consumed<sp/>CPU<sp/>and<sp/>NET<sp/>system<sp/>resources.<sp/>Before<sp/>a<sp/>transaction<sp/>is<sp/>executed,<sp/>by<sp/>the<sp/>blockchain,<sp/>it<sp/>first<sp/>calculates<sp/>how<sp/>many<sp/>resources<sp/>the<sp/>account<sp/>executing<sp/>the<sp/>transaction<sp/>can<sp/>consume.<sp/>The<sp/>calculation<sp/>uses<sp/>an<sp/>exponential<sp/>moving<sp/>average<sp/>with<sp/>linear<sp/>extrapolation<sp/>when<sp/>data<sp/>is<sp/>missing,<sp/>and<sp/>it<sp/>multiplies<sp/>the<sp/>currently<sp/>accumulated<sp/>average<sp/>by<sp/>`(number<sp/>of<sp/>blocks<sp/>in<sp/>the<sp/>window<sp/>-<sp/>number<sp/>of<sp/>blocks<sp/>since<sp/>last<sp/>update)<sp/>/<sp/>(number<sp/>of<sp/>blocks<sp/>in<sp/>the<sp/>window)`.<sp/>The<sp/>window<sp/>is<sp/>set<sp/>as<sp/>24<sp/>hours<sp/>window.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>formula<sp/>has<sp/>the<sp/>following<sp/>outcomes:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>If<sp/>an<sp/>account<sp/>waited<sp/>`number<sp/>of<sp/>blocks<sp/>in<sp/>the<sp/>window`<sp/>without<sp/>executing<sp/>any<sp/>transaction<sp/>it<sp/>resets<sp/>to<sp/>zero<sp/>usage.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>If<sp/>an<sp/>account<sp/>issues<sp/>a<sp/>transaction<sp/>with<sp/>every<sp/>block<sp/>it<sp/>would<sp/>always<sp/>be<sp/>`(number<sp/>of<sp/>blocks<sp/>in<sp/>the<sp/>window<sp/>-<sp/>1)<sp/>/<sp/>(number<sp/>of<sp/>blocks<sp/>in<sp/>the<sp/>window)`,<sp/>a<sp/>very<sp/>small<sp/>value,<sp/>very<sp/>close<sp/>to<sp/>zero.<sp/>Mathematically<sp/>it<sp/>_never_<sp/>reaches<sp/>zero<sp/>but<sp/>the<sp/>Antelope<sp/>implementation<sp/>truncates<sp/>off<sp/>the<sp/>tiny<sp/>numbers<sp/>to<sp/>zero.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>The<sp/>accounts<sp/>that<sp/>execute<sp/>transactions<sp/>more<sp/>often<sp/>than<sp/>the<sp/>ones<sp/>that<sp/>execute<sp/>less<sp/>transactions,<sp/>replenish<sp/>their<sp/>resources<sp/>slower<sp/>than<sp/>the<sp/>later.<sp/>In<sp/>other<sp/>words,<sp/>the<sp/>more<sp/>transactions<sp/>an<sp/>account<sp/>executes<sp/>the<sp/>slower<sp/>the<sp/>replenish<sp/>of<sp/>resources.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">[[info]]</highlight></codeline>
<codeline><highlight class="normal">|<sp/>The<sp/>blockchain<sp/>calculates<sp/>and<sp/>updates<sp/>the<sp/>remaining<sp/>resources,<sp/>for<sp/>the<sp/>accounts<sp/>which<sp/>execute<sp/>transactions,<sp/>with<sp/>each<sp/>block,<sp/>before<sp/>each<sp/>transaction<sp/>is<sp/>executed.<sp/>As<sp/>time<sp/>passes,<sp/>as<sp/>explained<sp/>above,<sp/>the<sp/>consumed<sp/>system<sp/>resources<sp/>are<sp/>gradually<sp/>replenished,<sp/>and<sp/>the<sp/>available<sp/>system<sp/>resources<sp/>increase,<sp/>or<sp/>decrease,<sp/>depending<sp/>on<sp/>how<sp/>many<sp/>transactions<sp/>an<sp/>account<sp/>executes.<sp/>After<sp/>waiting<sp/>for<sp/>some<sp/>time,<sp/>if<sp/>you<sp/>check<sp/>the<sp/>available<sp/>resources<sp/>balance<sp/>and<sp/>expect<sp/>to<sp/>see<sp/>it<sp/>increased,<sp/>because<sp/>your<sp/>account<sp/>did<sp/>not<sp/>executed<sp/>any<sp/>transactions,<sp/>you<sp/>will<sp/>not<sp/>see<sp/>it<sp/>updated.<sp/>That<sp/>is<sp/>because<sp/>it<sp/>gets<sp/>updated<sp/>only<sp/>before<sp/>a<sp/>transaction<sp/>is<sp/>executed.<sp/>Therefore<sp/>in<sp/>order<sp/>to<sp/>see<sp/>the<sp/>available<sp/>resources<sp/>you<sp/>have<sp/>to<sp/>execute<sp/>a<sp/>transaction.<sp/>This<sp/>is<sp/>counter<sp/>intuitive<sp/>and<sp/>the<sp/>next<sp/>versions<sp/>will<sp/>improve<sp/>this<sp/>aspect.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Buy<sp/>RAM</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>RAM<sp/>resource<sp/>must<sp/>be<sp/>bought<sp/>using<sp/>the<sp/>system<sp/>token.<sp/>Refer<sp/>to<sp/>the<sp/>[cleos<sp/>manual](https://github.com/AntelopeIO/leap/blob/main/docs/02_cleos/02_how-to-guides/how-to-buy-ram.md)<sp/>to<sp/>learn<sp/>how<sp/>to<sp/>do<sp/>it<sp/>via<sp/>the<sp/>command<sp/>line<sp/>interface.<sp/>When<sp/>an<sp/>account<sp/>consumes<sp/>all<sp/>its<sp/>allocated<sp/>RAM<sp/>can<sp/>not<sp/>store<sp/>any<sp/>additional<sp/>information<sp/>on<sp/>the<sp/>blockchain<sp/>database<sp/>until<sp/>it<sp/>frees<sp/>some<sp/>of<sp/>the<sp/>occupied<sp/>RAM<sp/>or<sp/>more<sp/>RAM<sp/>is<sp/>allocated<sp/>to<sp/>the<sp/>account<sp/>through<sp/>the<sp/>RAM<sp/>buying<sp/>process.</highlight></codeline>
    </programlisting>
    <location file="system/docs/01_key-concepts/05_stake.md"/>
  </compounddef>
</doxygen>
