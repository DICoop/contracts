<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.3" xml:lang="en-US">
  <compounddef id="01__upgrading-the-eosio_8system-contract_8md" kind="file" language="Markdown">
    <compoundname>01_upgrading-the-eosio.system-contract.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">---</highlight></codeline>
<codeline><highlight class="normal">content_title:<sp/>Upgrading<sp/>the<sp/>system<sp/>contract</highlight></codeline>
<codeline><highlight class="normal">---</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Indirect<sp/>method<sp/>using<sp/>eosio.msig<sp/>contract</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Cleos<sp/>currently<sp/>provides<sp/>tools<sp/>to<sp/>propose<sp/>an<sp/>action<sp/>with<sp/>the<sp/>eosio.msig<sp/>contract,<sp/>but<sp/>it<sp/>does<sp/>not<sp/>provide<sp/>an<sp/>easy<sp/>interface<sp/>to<sp/>propose<sp/>a<sp/>custom<sp/>transaction.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">So,<sp/>at<sp/>the<sp/>moment<sp/>it<sp/>is<sp/>difficult<sp/>to<sp/>propose<sp/>an<sp/>atomic<sp/>transaction<sp/>with<sp/>multiple<sp/>actions<sp/>(for<sp/>example<sp/>`eosio::setcode`<sp/>followed<sp/>by<sp/>`eosio::setabi`).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>advantage<sp/>of<sp/>the<sp/>eosio.msig<sp/>method<sp/>is<sp/>that<sp/>it<sp/>makes<sp/>coordination<sp/>much<sp/>easier<sp/>and<sp/>does<sp/>not<sp/>place<sp/>strict<sp/>time<sp/>limits<sp/>(less<sp/>than<sp/>9<sp/>hours)<sp/>on<sp/>signature<sp/>collection.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>disadvantage<sp/>of<sp/>the<sp/>eosio.msig<sp/>method<sp/>is<sp/>that<sp/>it<sp/>requires<sp/>the<sp/>proposer<sp/>to<sp/>have<sp/>sufficient<sp/>RAM<sp/>to<sp/>propose<sp/>the<sp/>transaction<sp/>and<sp/>currently<sp/>cleos<sp/>does<sp/>not<sp/>provide<sp/>convenient<sp/>tools<sp/>to<sp/>use<sp/>it<sp/>with<sp/>custom<sp/>transactions<sp/>like<sp/>the<sp/>one<sp/>that<sp/>would<sp/>be<sp/>necessary<sp/>to<sp/>atomically<sp/>upgrade<sp/>the<sp/>system<sp/>contract.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">For<sp/>now,<sp/>it<sp/>is<sp/>recommended<sp/>to<sp/>use<sp/>the<sp/>direct<sp/>method<sp/>to<sp/>upgrade<sp/>the<sp/>system<sp/>contract.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">#<sp/>Direct<sp/>method<sp/>(avoids<sp/>using<sp/>eosio.msig<sp/>contract)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Each<sp/>of<sp/>the<sp/>top<sp/>21<sp/>block<sp/>producers<sp/>should<sp/>do<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">1.<sp/>Get<sp/>current<sp/>system<sp/>contract<sp/>for<sp/>later<sp/>comparison<sp/>(actual<sp/>hash<sp/>and<sp/>ABI<sp/>on<sp/>the<sp/>main-net<sp/>blockchain<sp/>will<sp/>be<sp/>different):</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>get<sp/>code<sp/>-c<sp/>original_system_contract.wast<sp/>-a<sp/>original_system_contract.abi<sp/>eosio</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```console</highlight></codeline>
<codeline><highlight class="normal">code<sp/>hash:<sp/>cc0ffc30150a07c487d8247a484ce1caf9c95779521d8c230040c2cb0e2a3a60</highlight></codeline>
<codeline><highlight class="normal">saving<sp/>wast<sp/>to<sp/>original_system_contract.wast</highlight></codeline>
<codeline><highlight class="normal">saving<sp/>abi<sp/>to<sp/>original_system_contract.abi</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">2.<sp/>Generate<sp/>the<sp/>unsigned<sp/>transaction<sp/>which<sp/>upgrades<sp/>the<sp/>system<sp/>contract:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>set<sp/>contract<sp/>-s<sp/>-j<sp/>-d<sp/>eosio<sp/>contracts/eosio.system<sp/>|<sp/>tail<sp/>-n<sp/>+4<sp/>&gt;<sp/>upgrade_system_contract_trx.json</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>first<sp/>few<sp/>lines<sp/>of<sp/>the<sp/>generated<sp/>file<sp/>should<sp/>be<sp/>something<sp/>similar<sp/>to<sp/>(except<sp/>with<sp/>very<sp/>different<sp/>numbers<sp/>for<sp/>`expiration`,<sp/>`ref_block_num`,<sp/>and<sp/>`ref_block_prefix`):</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;expiration&quot;:<sp/>&quot;2018-06-15T22:17:10&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;ref_block_num&quot;:<sp/>4552,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;ref_block_prefix&quot;:<sp/>511016679,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;max_net_usage_words&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;max_cpu_usage_ms&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;delay_sec&quot;:<sp/>0,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;context_free_actions&quot;:<sp/>[],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;actions&quot;:<sp/>[{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;account&quot;:<sp/>&quot;eosio&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;name&quot;:<sp/>&quot;setcode&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;authorization&quot;:<sp/>[{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;actor&quot;:<sp/>&quot;eosio&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;permission&quot;:<sp/>&quot;active&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>],</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">and<sp/>the<sp/>last<sp/>few<sp/>lines<sp/>should<sp/>be:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;transaction_extensions&quot;:<sp/>[],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;signatures&quot;:<sp/>[],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;context_free_data&quot;:<sp/>[]</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">One<sp/>of<sp/>the<sp/>top<sp/>block<sp/>producers<sp/>should<sp/>be<sp/>chosen<sp/>to<sp/>lead<sp/>the<sp/>upgrade<sp/>process.<sp/>This<sp/>lead<sp/>producer<sp/>should<sp/>take<sp/>their<sp/>generated<sp/>`upgrade_system_contract_trx.json`,<sp/>rename<sp/>it<sp/>to<sp/>`upgrade_system_contract_official_trx.json`,<sp/>and<sp/>do<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">3.<sp/>Modify<sp/>the<sp/>`expiration`<sp/>timestamp<sp/>in<sp/>`upgrade_system_contract_official_trx.json`<sp/>to<sp/>a<sp/>time<sp/>that<sp/>is<sp/>sufficiently<sp/>far<sp/>in<sp/>the<sp/>future<sp/>to<sp/>give<sp/>enough<sp/>time<sp/>to<sp/>collect<sp/>all<sp/>the<sp/>necessary<sp/>signatures,<sp/>but<sp/>not<sp/>more<sp/>than<sp/>9<sp/>hours<sp/>from<sp/>the<sp/>time<sp/>the<sp/>transaction<sp/>was<sp/>generated.<sp/>Also,<sp/>keep<sp/>in<sp/>mind<sp/>that<sp/>the<sp/>transaction<sp/>will<sp/>not<sp/>be<sp/>accepted<sp/>into<sp/>the<sp/>blockchain<sp/>if<sp/>the<sp/>expiration<sp/>is<sp/>more<sp/>than<sp/>1<sp/>hour<sp/>from<sp/>the<sp/>present<sp/>time.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">4.<sp/>Pass<sp/>the<sp/>`upgrade_system_contract_official_trx.json`<sp/>file<sp/>to<sp/>all<sp/>the<sp/>other<sp/>top<sp/>21<sp/>block<sp/>producers.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Then<sp/>each<sp/>of<sp/>the<sp/>top<sp/>21<sp/>block<sp/>producers<sp/>should<sp/>do<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">5.<sp/>Compare<sp/>their<sp/>generated<sp/>`upgrade_system_contract_official_trx.json`<sp/>file<sp/>with<sp/>the<sp/>`upgrade_system_contract_official_trx.json`<sp/>provided<sp/>by<sp/>the<sp/>lead<sp/>producer.<sp/>The<sp/>only<sp/>difference<sp/>should<sp/>be<sp/>in<sp/>`expiration`,<sp/>`ref_block_num`,<sp/>`ref_block_prefix`,<sp/>for<sp/>example:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">diff<sp/>upgrade_system_contract_official_trx.json<sp/>upgrade_system_contract_trx.json</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">2,4c2,4</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/>&quot;expiration&quot;:<sp/>&quot;2018-06-15T22:17:10&quot;,</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/>&quot;ref_block_num&quot;:<sp/>4552,</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/>&quot;ref_block_prefix&quot;:<sp/>511016679,</highlight></codeline>
<codeline><highlight class="normal">---</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/><sp/><sp/>&quot;expiration&quot;:<sp/>&quot;2018-06-15T21:20:39&quot;,</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/><sp/><sp/>&quot;ref_block_num&quot;:<sp/>4972,</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/><sp/><sp/>&quot;ref_block_prefix&quot;:<sp/>195390844,</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">6.<sp/>If<sp/>the<sp/>comparison<sp/>is<sp/>good,<sp/>each<sp/>block<sp/>producer<sp/>should<sp/>proceed<sp/>with<sp/>signing<sp/>the<sp/>official<sp/>upgrade<sp/>transaction<sp/>with<sp/>the<sp/>keys<sp/>necessary<sp/>to<sp/>satisfy<sp/>their<sp/>active<sp/>permission.<sp/>If<sp/>the<sp/>block<sp/>producer<sp/>only<sp/>has<sp/>a<sp/>single<sp/>key<sp/>(i.e<sp/>the<sp/>&quot;active<sp/>key&quot;)<sp/>in<sp/>the<sp/>active<sp/>permission<sp/>of<sp/>their<sp/>block<sp/>producing<sp/>account,<sp/>then<sp/>they<sp/>only<sp/>need<sp/>to<sp/>generate<sp/>one<sp/>signature<sp/>using<sp/>that<sp/>active<sp/>key.<sp/>This<sp/>signing<sp/>process<sp/>can<sp/>be<sp/>done<sp/>offline<sp/>for<sp/>extra<sp/>security.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">First,<sp/>the<sp/>block<sp/>producer<sp/>should<sp/>collect<sp/>all<sp/>the<sp/>necessary<sp/>information.<sp/>Let<sp/>us<sp/>assume<sp/>that<sp/>the<sp/>block<sp/>producers<sp/>active<sp/>key<sp/>pair<sp/>is<sp/>`(EOS5kBmh5kfo6c6pwB8j77vrznoAaygzoYvBsgLyMMmQ9B6j83i9c,<sp/>5JjpkhxAmEfynDgSn7gmEKEVcBqJTtu6HiQFf4AVgGv5A89LfG3)`.<sp/>The<sp/>block<sp/>producer<sp/>needs<sp/>their<sp/>active<sp/>private<sp/>key<sp/>(`5JjpkhxAmEfynDgSn7gmEKEVcBqJTtu6HiQFf4AVgGv5A89LfG3`<sp/>in<sp/>this<sp/>example),<sp/>the<sp/>`upgrade_system_contract_official_trx.json`,<sp/>and<sp/>the<sp/>`chain_id`<sp/>(`d0242fb30b71b82df9966d10ff6d09e4f5eb6be7ba85fd78f796937f1959315e`<sp/>in<sp/>this<sp/>example)<sp/>which<sp/>can<sp/>be<sp/>retrieved<sp/>through<sp/>`cleos<sp/>get<sp/>info`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Then<sp/>on<sp/>a<sp/>secure<sp/>computer<sp/>the<sp/>producer<sp/>can<sp/>sign<sp/>the<sp/>transaction<sp/>(the<sp/>producer<sp/>will<sp/>need<sp/>to<sp/>paste<sp/>in<sp/>their<sp/>private<sp/>key<sp/>when<sp/>prompted):</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>sign<sp/>--chain-id<sp/>d0242fb30b71b82df9966d10ff6d09e4f5eb6be7ba85fd78f796937f1959315e<sp/>upgrade_system_contract_trx.json<sp/>|<sp/>tail<sp/>-n<sp/>5</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">private<sp/>key:<sp/><sp/><sp/>&quot;signatures&quot;:<sp/>[</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;SIG_K1_JzABB9gzDGwUHaRmox68UNcfxMVwMnEXqqS1MvtsyUX8KGTbsZ5aZQZjHD5vREQa5BkZ7ft8CceLBLAj8eZ5erZb9cHuy5&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;context_free_data&quot;:<sp/>[]</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Make<sp/>sure<sp/>to<sp/>use<sp/>the<sp/>`chain_id`<sp/>of<sp/>the<sp/>actual<sp/>main-net<sp/>blockchain<sp/>that<sp/>the<sp/>transaction<sp/>will<sp/>be<sp/>submitted<sp/>to<sp/>and<sp/>not<sp/>the<sp/>example<sp/>`chain_id`<sp/>provided<sp/>above.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>output<sp/>should<sp/>include<sp/>the<sp/>signature<sp/>(in<sp/>this<sp/>case<sp/>`&quot;SIG_K1_JzABB9gzDGwUHaRmox68UNcfxMVwMnEXqqS1MvtsyUX8KGTbsZ5aZQZjHD5vREQa5BkZ7ft8CceLBLAj8eZ5erZb9cHuy5&quot;`)<sp/>which<sp/>the<sp/>producer<sp/>should<sp/>then<sp/>send<sp/>to<sp/>the<sp/>lead<sp/>producer.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">When<sp/>the<sp/>lead<sp/>producer<sp/>collects<sp/>15<sp/>producer<sp/>signatures,<sp/>the<sp/>lead<sp/>producer<sp/>should<sp/>do<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">7.<sp/>Make<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>`upgrade_system_contract_official_trx.json`<sp/>and<sp/>call<sp/>it<sp/>`upgrade_system_contract_official_trx_signed.json`,<sp/>and<sp/>then<sp/>modify<sp/>the<sp/>`upgrade_system_contract_official_trx_signed.json`<sp/>so<sp/>that<sp/>the<sp/>`signatures`<sp/>field<sp/>includes<sp/>all<sp/>15<sp/>collected<sp/>signatures.<sp/>So<sp/>the<sp/>tail<sp/>end<sp/>of<sp/>`upgrade_system_contract_official_trx_signed.json`<sp/>could<sp/>look<sp/>something<sp/>like:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cat<sp/>upgrade_system_contract_official_trx_signed.json<sp/>|<sp/>tail<sp/>-n<sp/>20</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;transaction_extensions&quot;:<sp/>[],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;signatures&quot;:<sp/>[</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_JzABB9gzDGwUHaRmox68UNcfxMVwMnEXqqS1MvtsyUX8KGTbsZ5aZQZjHD5vREQa5BkZ7ft8CceLBLAj8eZ5erZb9cHuy5&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_Kj7XJxnPQSxEXZhMA8uK3Q1zAxp7AExzsRd7Xaa7ywcE4iUrhbVA3B6GWre5Ctgikb4q4CeU6Bvv5qmh9uJjqKEbbjd3sX&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_KbE7qyz3A9LoQPYWzo4e6kg5ZVojQVAkDKuufUN2EwVUqtFhtjmGoC6QPQqLi8J7ftiysBp52wJBPjtNQUfZiGpGMsnZ1f&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_KdQsE7ahHA9swE9SDGg4oF6XahpgHmZfEgQAy9KPBLd9HuwrF6c8m6jz43zizK2oo32Ejg1DYuMfoEvJgVfXo81jsqTHvA&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_K6228Hi2z1WabgVdf5bk2UdKyyDSVFwkMaagTn9oLVDV8rCX7aQcjY94c39ah2CkLTsTEqzTPAYknJ8m2m9B7npPkHaFzc&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_Jzdx75hBCA2WSaXgrupmrNbcQocUCsP8r1BKkPXMreiAKPZDwX9J3G8fS1HhyqWjc7FbukwZf8sVRdS3wKbJVpytqXe7Nn&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_KW7Qu2SdPD3zuQKh2ziFLzn9QbKqeMpeiemULky5Bbg1Mst6ijbCX3k2AVFGNFLkNLA36PM1WAT5oipzu1B1K7ymRxTx1Z&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_KXJf1KZNpz73YFKKE7u6jFgsQ8XcX3yA7rDX6ZmG1Qfnc9FLLmT1WViv4bwcPbxaEYfR6SNWfk5cCR9eao2si1soqkXq92&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_JynjkHFT5UFGDpEcqdriXTzCGCwS36Xztq4UAWQHLQgRUZT2YFoLhUcc87kvUteqCUGVxsmSbfgWv1KLy24voKN4Qs5zTe&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_JxhfCaGBhuNShpDHn7j1CryG3iSebvfi7FUnJsfkXNTiwLyq2NDBkeakwjCMWFbzr6qqWuMDLjfXbzdtU17f1wCXMjKSgk&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_KcMSz89QG1ZRFNrXc69R63d5KXbJA8CBjNPYv1VEA3TRfjqVYuhyaHpGXQN4RSKDq4ygr3UTRYBQQVutkJnR6zZ4Ssgd7R&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_JuxT6bhUAbDs6Q2ppuKyKauduvbaJLxvh4gBH4e4A9yRhvUBT7w3DcvMyhdaor27Kbu29jnqhTbvXcb57QqKWQDpboLv7e&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_K8BuFYpCiC5FhpVK8ZAzc3VUg7vz6WwLoWBrGN6nnuqUjngGqvHp3UxDVzcwhqccHdv8kdPXvF6G1NszwF1dd3wjCrHBYw&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_KfH5ZirPwDk1RQKvJv2AGPfsJyPXvXLegZ7LvcPmRtjtMiErs1STXLNT8kiBfhZr4xkWRA5NR1kMF3d49DFMJiB2iWMXJc&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>&quot;SIG_K1_KjJB8jtcqpVe3r5jouFiAa9wJeYqoLMh5xrUV6kBF6UWfbYjimMWBJWz2ZPomGDsk7JtdUESVrYj1AhYbdp3X48KLm5Cev&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;context_free_data&quot;:<sp/>[]</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">8.<sp/>Push<sp/>the<sp/>signed<sp/>transaction<sp/>to<sp/>the<sp/>blockchain:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>push<sp/>transaction<sp/>--skip-sign<sp/>upgrade_system_contract_official_trx_signed.json</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;transaction_id&quot;:<sp/>&quot;202888b32e7a0f9de1b8483befac8118188c786380f6e62ced445f93fb2b1041&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&quot;processed&quot;:<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;id&quot;:<sp/>&quot;202888b32e7a0f9de1b8483befac8118188c786380f6e62ced445f93fb2b1041&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;receipt&quot;:<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;status&quot;:<sp/>&quot;executed&quot;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;cpu_usage_us&quot;:<sp/>4909,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;net_usage_words&quot;:<sp/>15124</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;elapsed&quot;:<sp/>4909,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;net_usage&quot;:<sp/>120992,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;scheduled&quot;:<sp/>false,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&quot;action_traces&quot;:<sp/>[{</highlight></codeline>
<codeline><highlight class="normal">...</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>get<sp/>an<sp/>error<sp/>message<sp/>like<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```console</highlight></codeline>
<codeline><highlight class="normal">Error<sp/>3090003:<sp/>provided<sp/>keys,<sp/>permissions,<sp/>and<sp/>delays<sp/>do<sp/>not<sp/>satisfy<sp/>declared<sp/>authorizations</highlight></codeline>
<codeline><highlight class="normal">Ensure<sp/>that<sp/>you<sp/>have<sp/>the<sp/>related<sp/>private<sp/>keys<sp/>inside<sp/>your<sp/>wallet<sp/>and<sp/>your<sp/>wallet<sp/>is<sp/>unlocked.</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">That<sp/>means<sp/>that<sp/>at<sp/>least<sp/>one<sp/>of<sp/>the<sp/>signatures<sp/>provided<sp/>were<sp/>bad.<sp/>This<sp/>may<sp/>be<sp/>because<sp/>a<sp/>producer<sp/>signed<sp/>the<sp/>wrong<sp/>transaction,<sp/>used<sp/>the<sp/>wrong<sp/>private<sp/>key,<sp/>or<sp/>used<sp/>the<sp/>wrong<sp/>chain<sp/>ID.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>get<sp/>an<sp/>error<sp/>message<sp/>like<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```console</highlight></codeline>
<codeline><highlight class="normal">Error<sp/>3090002:<sp/>irrelevant<sp/>signature<sp/>included</highlight></codeline>
<codeline><highlight class="normal">Please<sp/>remove<sp/>the<sp/>unnecessary<sp/>signature<sp/>from<sp/>your<sp/>transaction!</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">That<sp/>means<sp/>unnecessary<sp/>signatures<sp/>were<sp/>included.<sp/>If<sp/>there<sp/>are<sp/>21<sp/>active<sp/>producers,<sp/>only<sp/>signatures<sp/>from<sp/>exactly<sp/>15<sp/>of<sp/>those<sp/>21<sp/>active<sp/>producers<sp/>are<sp/>needed.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>get<sp/>an<sp/>error<sp/>message<sp/>like<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```console</highlight></codeline>
<codeline><highlight class="normal">Error<sp/>3040006:<sp/>Transaction<sp/>Expiration<sp/>Too<sp/>Far</highlight></codeline>
<codeline><highlight class="normal">Please<sp/>decrease<sp/>the<sp/>expiration<sp/>time<sp/>of<sp/>your<sp/>transaction!</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">That<sp/>means<sp/>that<sp/>the<sp/>expiration<sp/>time<sp/>is<sp/>more<sp/>than<sp/>1<sp/>hour<sp/>in<sp/>the<sp/>future<sp/>and<sp/>you<sp/>need<sp/>to<sp/>wait<sp/>some<sp/>time<sp/>before<sp/>being<sp/>allowed<sp/>to<sp/>push<sp/>the<sp/>transaction.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>get<sp/>an<sp/>error<sp/>message<sp/>like<sp/>the<sp/>following:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```console</highlight></codeline>
<codeline><highlight class="normal">Error<sp/>3040005:<sp/>Expired<sp/>Transaction</highlight></codeline>
<codeline><highlight class="normal">Please<sp/>increase<sp/>the<sp/>expiration<sp/>time<sp/>of<sp/>your<sp/>transaction!</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">That<sp/>means<sp/>the<sp/>expiration<sp/>time<sp/>of<sp/>the<sp/>signed<sp/>transaction<sp/>has<sp/>passed<sp/>and<sp/>this<sp/>entire<sp/>process<sp/>has<sp/>to<sp/>restart<sp/>from<sp/>step<sp/>1.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">9.<sp/>Assuming<sp/>the<sp/>transaction<sp/>successfully<sp/>executes,<sp/>everyone<sp/>can<sp/>then<sp/>verify<sp/>that<sp/>the<sp/>new<sp/>contract<sp/>is<sp/>in<sp/>place:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">cleos<sp/>get<sp/>code<sp/>-c<sp/>new_system_contract.wast<sp/>-a<sp/>new_system_contract.abi<sp/>eosio</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```console</highlight></codeline>
<codeline><highlight class="normal">code<sp/>hash:<sp/>9fd195bc5a26d3cd82ae76b70bb71d8ce83dcfeb0e5e27e4e740998fdb7b98f8</highlight></codeline>
<codeline><highlight class="normal">saving<sp/>wast<sp/>to<sp/>new_system_contract.wast</highlight></codeline>
<codeline><highlight class="normal">saving<sp/>abi<sp/>to<sp/>new_system_contract.abi</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```sh</highlight></codeline>
<codeline><highlight class="normal">diff<sp/>original_system_contract.abi<sp/>new_system_contract.abi</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">```json</highlight></codeline>
<codeline><highlight class="normal">584,592d583</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>},{</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;name&quot;:<sp/>&quot;deferred_trx_id&quot;,</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;type&quot;:<sp/>&quot;uint32&quot;</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>},{</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;name&quot;:<sp/>&quot;last_unstake_time&quot;,</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;type&quot;:<sp/>&quot;time_point_sec&quot;</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>},{</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;name&quot;:<sp/>&quot;unstaking&quot;,</highlight></codeline>
<codeline><highlight class="normal">&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;type&quot;:<sp/>&quot;asset&quot;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
    </programlisting>
    <location file="system/docs/04_guides/01_upgrading-the-eosio.system-contract.md"/>
  </compounddef>
</doxygen>
